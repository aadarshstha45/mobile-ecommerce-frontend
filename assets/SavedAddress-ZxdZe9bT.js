import{Q as M,R as U,j as n,ak as G,al as J,W as g,am as K,a0 as X,be as Y,T as d,bf as Z,bg as $,aj as ee,bh as ne,r as u,bi as ie,bj as le,bk as se,a6 as te,q as E,F as oe,L as re,S as F,B as ce,H as S,bl as ae}from"./index-CU6XIhgo.js";import{S as de,c as me,P as pe}from"./SelectInput-Bj6s3MAD.js";import{a as x}from"./TextInput-CvODIWjx.js";import{M as ue,a as xe,C as he}from"./ModalForm-BgJ-OAaS.js";import{C as ye}from"./circle-plus-CXq2fscI.js";import"./chunk-H46NUPBZ-C060BS45.js";import"./x-D2BCFCo-.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=M("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=M("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var je=U({displayName:"EditIcon",path:n.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})});const _e=({onView:s,onEdit:t,onDelete:h})=>{const m=[{id:1,icon:ge,color:"green.500",label:"View",onClick:s},{id:2,icon:je,color:"blue.500",label:"Edit",onClick:t},{id:3,icon:$,color:"red.500",label:"Delete",onClick:h}];return n.jsxs(G,{isLazy:!0,colorScheme:"primary",placement:"bottom-end",children:[n.jsx(J,{pos:"absolute",top:2,right:2,children:n.jsx(g,{as:be,color:"primary.500",boxSize:4})}),n.jsx(K,{border:"thin solid",textColor:"primary.500",mt:-2,py:0,overflow:"hidden",minW:"100px",children:m.map((r,p)=>n.jsxs(X.Fragment,{children:[n.jsx(Y,{icon:n.jsx(g,{as:r.icon,color:r.color,boxSize:4}),onClick:r.onClick,py:1,children:n.jsx(d,{fontSize:{base:"14px",md:"16px"},children:r.label})}),n.jsx(Z,{borderWidth:"thin",opacity:p!==m.length-1?1:0,my:0})]},p))})]})},we=()=>{const s=ee(),{data:t,isPending:h}=ne(),[m,r]=u.useState("Nepal"),[p,j]=u.useState("+977"),[c,a]=u.useState(null),C=ie(),k=le(c),A=se(),[_,y]=u.useState(null),[l,O]=u.useState(!1),{control:o,handleSubmit:P,formState:{errors:R},reset:b}=te({defaultValues:{country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}});u.useEffect(()=>{var e,z;if(c){const i=t==null?void 0:t.find(Q=>Q.id===c);y(i),j(i==null?void 0:i.country_code),b({country:i==null?void 0:i.country,city:i==null?void 0:i.city,street:i==null?void 0:i.street,landmark:i==null?void 0:i.landmark,recipient_name:(z=(e=s==null?void 0:s.shipping_details)==null?void 0:e[0])!=null&&z.is_billing_address?s==null?void 0:s.name:(i==null?void 0:i.recipient_name)??"",phone_number:i==null?void 0:i.phone_number,is_billing_address:i==null?void 0:i.is_billing_address})}},[c,t,b,s]);const{isOpen:L,onOpen:f,onClose:w}=E(),{isOpen:V,onOpen:I,onClose:v}=E(),N=async e=>{_?(await k.mutateAsync({...e,country:m,country_code:p}),a(null),y(null)):await C.mutateAsync({...e,country:m,country_code:p}),w(),b({country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1})},T=e=>{O(!0),e&&(a(e),f())},q=e=>{e&&(a(e),f())},H=()=>{a(null),y(null),f()},W=()=>{a(null),y(null),b({country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}),O(!1),w()},B=e=>{e&&(a(e),I())},D=async()=>{c&&(await A.mutateAsync(c),v())};return n.jsxs(oe,{w:"full",flexDir:"column",gap:4,children:[n.jsx(d,{fontSize:"xl",children:"Saved Address"}),h?n.jsx(re,{height:window.innerHeight/2}):t?t.map(e=>n.jsxs(F,{gap:1,children:[n.jsxs(ce,{py:8,bg:e.is_billing_address?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:e.is_billing_address?"2px solid":"1px solid",borderColor:"#939292",borderRadius:2,px:4,pos:"relative",mt:4,children:[n.jsxs(S,{spacing:4,align:"start",children:[n.jsx(g,{as:ue,color:"primary.500",boxSize:8}),n.jsxs(F,{spacing:2,children:[n.jsx(S,{spacing:4,children:n.jsxs(d,{fontSize:{base:"14px",md:"18px"},children:[e.address&&e.address+","," ",(e==null?void 0:e.street)&&(e==null?void 0:e.street)+","," ",e==null?void 0:e.city,",",e==null?void 0:e.country]})}),n.jsx(d,{fontSize:{base:"14px",md:"18px"},children:e==null?void 0:e.landmark})]})]}),n.jsx(_e,{onView:()=>T(e==null?void 0:e.id),onDelete:()=>B(e==null?void 0:e.id),onEdit:()=>q(e==null?void 0:e.id)})]},e.id),e.is_billing_address&&n.jsx(d,{fontStyle:"italic",fontSize:"sm",color:"#939292",children:"* This address is used for billing by default."})]},e.id)):n.jsx(n.Fragment,{children:n.jsx(d,{fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})}),!h&&n.jsxs(S,{onClick:H,cursor:"pointer",color:"primary.500",mt:4,w:"fit-content",children:[n.jsx(g,{as:ye,boxSize:6}),n.jsx(d,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),n.jsxs(xe,{form:"shipping-address-form",isOpen:L,onClose:W,heading:l?"View Address":_?"Edit Address":"Add New Address",buttonText:c?"Update":"Add",onSubmit:P(N),isLoading:_?k.isPending:C.isPending,isDisabled:l,isHidden:l,children:[n.jsx(de,{width:"full",label:"Country",options:me,name:"country",isControlled:!0,isRequired:!l,placeholder:"Select Country",control:o,defaultValue:m,handleChange:e=>{r(e.value),j(e.dial_code)},isReadOnly:l,errors:R}),n.jsx(x,{label:"City",control:o,isReadOnly:l,name:"city",isRequired:!l}),n.jsx(x,{label:"Address",control:o,isReadOnly:l,name:"address"}),n.jsx(x,{label:"Street",control:o,isReadOnly:l,name:"street"}),n.jsx(x,{label:"Landmark",control:o,isReadOnly:l,name:"landmark"}),n.jsx(x,{label:"Recipient Name",control:o,isReadOnly:l,name:"recipient_name",isRequired:!l}),n.jsx(pe,{defaultValue:p,handleChange:e=>{r(e.name),j(e.value)},name:"phone_number",label:"Phone Number",control:o,isReadOnly:l,errors:R,isRequired:!l}),n.jsx(he,{control:o,isReadOnly:l,name:"is_billing_address",label:"Set as default billing address"})]}),n.jsx(ae,{heading:"Delete Address",message:"Are you sure you want to delete this address?",isOpen:V,isDeleting:A.isPending,onDelete:D,onClose:()=>{v(),a(null)}})]})};export{we as default};
