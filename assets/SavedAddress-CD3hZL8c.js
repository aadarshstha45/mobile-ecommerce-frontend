import{R as t,r as c,x as z,j as l,X as Q,Y as ee,t as A,$ as te,be as ne,T as u,bf as le,bc as ae,W as re,bg as ie,bh as oe,bi as se,bj as ce,q as F,F as me,L as pe,S as P,B as de,H as M,bk as ue}from"./index-CkiCkVzJ.js";import{w as be,a as y}from"./TextInput-BLwJ8rby.js";import{M as he,a as ye,C as xe}from"./ModalForm-302FXM4F.js";import{C as ge}from"./PlusCircle-BfJShnFn.js";import{u as Ae}from"./index.esm-CeDGwYn6.js";import{S as fe,c as je,P as Ze}from"./SelectInput-Cp7MsvuN.js";import"./X-BNpK52mh.js";import"./chunk-H46NUPBZ-GRMvZQK7.js";const Me=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M112,60a16,16,0,1,1,16,16A16,16,0,0,1,112,60Zm16,52a16,16,0,1,0,16,16A16,16,0,0,0,128,112Zm0,68a16,16,0,1,0,16,16A16,16,0,0,0,128,180Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M176,32V224a16,16,0,0,1-16,16H96a16,16,0,0,1-16-16V32A16,16,0,0,1,96,16h64A16,16,0,0,1,176,32Z",opacity:"0.2"}),t.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M160,16H96A16,16,0,0,0,80,32V224a16,16,0,0,0,16,16h64a16,16,0,0,0,16-16V32A16,16,0,0,0,160,16ZM128,208a12,12,0,1,1,12-12A12,12,0,0,1,128,208Zm0-68a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm0-68a12,12,0,1,1,12-12A12,12,0,0,1,128,72Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M118,60a10,10,0,1,1,10,10A10,10,0,0,1,118,60Zm10,58a10,10,0,1,0,10,10A10,10,0,0,0,128,118Zm0,68a10,10,0,1,0,10,10A10,10,0,0,0,128,186Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M120,60a8,8,0,1,1,8,8A8,8,0,0,1,120,60Zm8,60a8,8,0,1,0,8,8A8,8,0,0,0,128,120Zm0,68a8,8,0,1,0,8,8A8,8,0,0,0,128,188Z"}))]]),Ee=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M230.14,70.54,185.46,25.85a20,20,0,0,0-28.29,0L33.86,149.17A19.85,19.85,0,0,0,28,163.31V208a20,20,0,0,0,20,20H92.69a19.86,19.86,0,0,0,14.14-5.86L230.14,98.82a20,20,0,0,0,0-28.28ZM93,180l71-71,11,11-71,71ZM76,163,65,152l71-71,11,11ZM52,173l15.51,15.51h0L83,204H52ZM192,103,153,64l18.34-18.34,39,39Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"}),t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160l90.35-90.35,16.68,16.69L68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188l90.35-90.35h0l16.68,16.69Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M225.9,74.78,181.21,30.09a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H92.69a13.94,13.94,0,0,0,9.9-4.1L225.9,94.58a14,14,0,0,0,0-19.8ZM48.49,160,136,72.48,155.51,92,68,179.51ZM46,208V174.48L81.51,210H48A2,2,0,0,1,46,208Zm50-.49L76.49,188,164,100.48,183.51,120ZM217.41,86.1,192,111.51,144.49,64,169.9,38.58a2,2,0,0,1,2.83,0l44.68,44.69a2,2,0,0,1,0,2.83Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.52,154.83A11.9,11.9,0,0,0,36,163.31V208a12,12,0,0,0,12,12H92.69a12,12,0,0,0,8.48-3.51L224.48,93.17a12,12,0,0,0,0-17ZM45.66,160,136,69.65,158.34,92,68,182.34ZM44,208V169.66l21.17,21.17h0L86.34,212H48A4,4,0,0,1,44,208Zm52,2.34L73.66,188,164,97.65,186.34,120ZM218.83,87.51,192,114.34,141.66,64l26.82-26.83a4,4,0,0,1,5.66,0l44.69,44.68a4,4,0,0,1,0,5.66Z"}))]]);var Oe=Object.defineProperty,_e=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,V=(a,n,r)=>n in a?Oe(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,Ce=(a,n)=>{for(var r in n||(n={}))we.call(n,r)&&V(a,r,n[r]);if(R)for(var r of R(n))Le.call(n,r)&&V(a,r,n[r]);return a},ve=(a,n)=>_e(a,Se(n));const $=c.forwardRef((a,n)=>t.createElement(z,ve(Ce({ref:n},a),{weights:Me})));$.displayName="DotsThreeVertical";var Fe=Object.defineProperty,Pe=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,H=(a,n,r)=>n in a?Fe(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,He=(a,n)=>{for(var r in n||(n={}))Ve.call(n,r)&&H(a,r,n[r]);if(k)for(var r of k(n))ke.call(n,r)&&H(a,r,n[r]);return a},ze=(a,n)=>Pe(a,Re(n));const N=c.forwardRef((a,n)=>t.createElement(z,ze(He({ref:n},a),{weights:Ee})));N.displayName="Pencil";const $e=({onView:a,onEdit:n,onDelete:r})=>{const b=[{id:1,icon:be,color:"green.500",label:"View",onClick:a},{id:2,icon:N,color:"blue.500",label:"Edit",onClick:n},{id:3,icon:ae,color:"red.500",label:"Delete",onClick:r}];return l.jsxs(Q,{isLazy:!0,colorScheme:"primary",placement:"bottom-end",children:[l.jsx(ee,{pos:"absolute",top:2,right:2,children:l.jsx(A,{as:$,color:"primary.500",boxSize:4})}),l.jsx(te,{border:"thin solid",textColor:"primary.500",mt:-2,py:0,overflow:"hidden",minW:"100px",children:b.map((m,h)=>l.jsxs(t.Fragment,{children:[l.jsx(ne,{icon:l.jsx(A,{as:m.icon,color:m.color,boxSize:4}),onClick:m.onClick,py:1,children:l.jsx(u,{fontSize:{base:"14px",md:"16px"},children:m.label})}),l.jsx(le,{borderWidth:"thin",opacity:h!==b.length-1?1:0,my:0})]},h))})]})},Xe=()=>{const a=re(),{data:n,isPending:r}=ie(),[b,m]=c.useState("Nepal"),[h,f]=c.useState("+977"),[p,d]=c.useState(null),E=oe(),O=se(p),_=ce(),[j,x]=c.useState(null),[o,S]=c.useState(!1),{control:s,handleSubmit:D,formState:{errors:w},reset:g}=Ae({defaultValues:{country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}});c.useEffect(()=>{var e,v;if(p){const i=n==null?void 0:n.find(K=>K.id===p);x(i),f(i==null?void 0:i.country_code),g({country:i==null?void 0:i.country,city:i==null?void 0:i.city,street:i==null?void 0:i.street,landmark:i==null?void 0:i.landmark,recipient_name:(v=(e=a==null?void 0:a.shipping_details)==null?void 0:e[0])!=null&&v.is_billing_address?a==null?void 0:a.name:(i==null?void 0:i.recipient_name)??"",phone_number:i==null?void 0:i.phone_number,is_billing_address:i==null?void 0:i.is_billing_address})}},[p,n,g,a]);const{isOpen:I,onOpen:Z,onClose:L}=F(),{isOpen:T,onOpen:q,onClose:C}=F(),B=async e=>{j?(await O.mutateAsync({...e,country:b,country_code:h}),d(null),x(null)):await E.mutateAsync({...e,country:b,country_code:h}),L(),g({country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1})},W=e=>{S(!0),e&&(d(e),Z())},U=e=>{e&&(d(e),Z())},X=()=>{d(null),x(null),Z()},Y=()=>{d(null),x(null),g({country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}),S(!1),L()},G=e=>{e&&(d(e),q())},J=async()=>{p&&(await _.mutateAsync(p),C())};return l.jsxs(me,{w:"full",flexDir:"column",gap:4,children:[l.jsx(u,{fontSize:"xl",children:"Saved Address"}),r?l.jsx(pe,{height:window.innerHeight/2}):n?n.map(e=>l.jsxs(P,{gap:1,children:[l.jsxs(de,{py:8,bg:e.is_billing_address?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:e.is_billing_address?"2px solid":"1px solid",borderColor:"#939292",borderRadius:2,px:4,pos:"relative",mt:4,children:[l.jsxs(M,{spacing:4,align:"start",children:[l.jsx(A,{as:he,color:"primary.500",boxSize:8}),l.jsxs(P,{spacing:2,children:[l.jsx(M,{spacing:4,children:l.jsxs(u,{fontSize:{base:"14px",md:"18px"},children:[e.address&&e.address+","," ",(e==null?void 0:e.street)&&(e==null?void 0:e.street)+","," ",e==null?void 0:e.city,",",e==null?void 0:e.country]})}),l.jsx(u,{fontSize:{base:"14px",md:"18px"},children:e==null?void 0:e.landmark})]})]}),l.jsx($e,{onView:()=>W(e==null?void 0:e.id),onDelete:()=>G(e==null?void 0:e.id),onEdit:()=>U(e==null?void 0:e.id)})]},e.id),e.is_billing_address&&l.jsx(u,{fontStyle:"italic",fontSize:"sm",color:"#939292",children:"* This address is used for billing by default."})]},e.id)):l.jsx(l.Fragment,{children:l.jsx(u,{fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})}),!r&&l.jsxs(M,{onClick:X,cursor:"pointer",color:"primary.500",mt:4,w:"fit-content",children:[l.jsx(A,{as:ge,boxSize:6}),l.jsx(u,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),l.jsxs(ye,{form:"shipping-address-form",isOpen:I,onClose:Y,heading:o?"View Address":j?"Edit Address":"Add New Address",buttonText:p?"Update":"Add",onSubmit:D(B),isLoading:j?O.isPending:E.isPending,isDisabled:o,isHidden:o,children:[l.jsx(fe,{width:"full",label:"Country",options:je,name:"country",isControlled:!0,isRequired:!o,placeholder:"Select Country",control:s,defaultValue:b,handleChange:e=>{m(e.value),f(e.dial_code)},isReadOnly:o,errors:w}),l.jsx(y,{label:"City",control:s,isReadOnly:o,name:"city",isRequired:!o}),l.jsx(y,{label:"Address",control:s,isReadOnly:o,name:"address"}),l.jsx(y,{label:"Street",control:s,isReadOnly:o,name:"street"}),l.jsx(y,{label:"Landmark",control:s,isReadOnly:o,name:"landmark"}),l.jsx(y,{label:"Recipient Name",control:s,isReadOnly:o,name:"recipient_name",isRequired:!o}),l.jsx(Ze,{defaultValue:h,handleChange:e=>{m(e.name),f(e.value)},name:"phone_number",label:"Phone Number",control:s,isReadOnly:o,errors:w,isRequired:!o}),l.jsx(xe,{control:s,isReadOnly:o,name:"is_billing_address",label:"Set as default billing address"})]}),l.jsx(ue,{heading:"Delete Address",message:"Are you sure you want to delete this address?",isOpen:T,isDeleting:_.isPending,onDelete:J,onClose:()=>{C(),d(null)}})]})};export{Xe as default};
