import{o as U,j as n,p as Z,n as X,w as E,x as Y,a1 as G,a2 as J,y as b,a4 as K,R as Q,aT as $,T as m,aU as ee,a0 as ne,aV as ie,r as u,aW as se,aX as te,aY as le,W as oe,U as R,F as re,L as ae,S as z,B as ce,at as _,aZ as de}from"./index-BISsgrs9.js";import{P as me}from"./PhoneInput-DPhXZ9HV.js";import{S as pe,c as ue}from"./SelectInput-DgrB4gdK.js";import{T as y}from"./TextInput-BhA_o2nr.js";import{M as xe,C as he}from"./Checkbox-BkHiX4-Z.js";import{M as ye}from"./ModalForm-CorGXDFJ.js";import{C as be}from"./circle-plus-B27cN5_8.js";import"./chunk-H46NUPBZ-Dd1bnTT1.js";import"./index.esm-jS8sanS8.js";var M=t=>{const{className:l,...p}=t,r=U();return n.jsx(Z.hr,{"aria-orientation":"horizontal",className:X("chakra-menu__divider",l),...p,__css:r.divider})};M.displayName="MenuDivider";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=E("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=E("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var _e=Y({displayName:"EditIcon",path:n.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})});const fe=({onView:t,onEdit:l,onDelete:p})=>{const r=[{id:1,icon:je,color:"green.500",label:"View",onClick:t},{id:2,icon:_e,color:"blue.500",label:"Edit",onClick:l},{id:3,icon:ee,color:"red.500",label:"Delete",onClick:p}];return n.jsxs(G,{isLazy:!0,colorScheme:"primary",placement:"bottom-end",children:[n.jsx(J,{pos:"absolute",top:2,right:2,children:n.jsx(b,{as:ge,color:"primary.500",boxSize:4})}),n.jsx(K,{border:"thin solid",textColor:"primary.500",mt:-2,py:0,overflow:"hidden",minW:"100px",children:r.map((a,o)=>n.jsxs(Q.Fragment,{children:[n.jsx($,{icon:n.jsx(b,{as:a.icon,color:a.color,boxSize:4}),onClick:a.onClick,py:1,children:n.jsx(m,{fontSize:{base:"14px",md:"16px"},children:a.label})}),n.jsx(M,{borderWidth:"thin",opacity:o!==r.length-1?1:0,my:0})]},o))})]})},Ee=()=>{const t=ne(),{data:l,isPending:p}=ie(),[r,a]=u.useState("+977"),[o,c]=u.useState(null),f=se(),S=te(o),k=le(),[g,x]=u.useState(null),[s,C]=u.useState(!1),{control:d,handleSubmit:F,formState:{errors:A},reset:h}=oe({defaultValues:{country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}});u.useEffect(()=>{var e,v;if(o){const i=l==null?void 0:l.find(B=>B.id===o);x(i),a(i==null?void 0:i.country_code),h({country:i==null?void 0:i.country,city:i==null?void 0:i.city,street:i==null?void 0:i.street,landmark:i==null?void 0:i.landmark,recipient_name:(v=(e=t==null?void 0:t.shipping_details)==null?void 0:e[0])!=null&&v.is_billing_address?t==null?void 0:t.name:(i==null?void 0:i.recipient_name)??"",phone_number:i==null?void 0:i.phone_number,is_billing_address:i==null?void 0:i.is_billing_address})}},[o,l,h,t]),u.useEffect(()=>{window.scrollTo(0,0)},[]);const{isOpen:P,onOpen:j,onClose:w}=R(),{isOpen:L,onOpen:N,onClose:O}=R(),T=async e=>{g?(await S.mutateAsync({...e,country_code:r}),c(null),x(null)):await f.mutateAsync({...e,country_code:r}),w(),h({country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1})},V=e=>{C(!0),e&&(c(e),j())},I=e=>{e&&(c(e),j())},W=()=>{c(null),x(null),j()},q=()=>{c(null),x(null),h({country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}),C(!1),w()},D=e=>{e&&(c(e),N())},H=async()=>{o&&(await k.mutateAsync(o),O())};return n.jsxs(re,{w:"full",flexDir:"column",gap:4,children:[n.jsx(m,{fontSize:"xl",children:"Saved Address"}),p?n.jsx(ae,{height:window.innerHeight/2}):l?l.map(e=>n.jsxs(z,{gap:1,children:[n.jsxs(ce,{py:8,bg:e.is_billing_address?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:e.is_billing_address?"2px solid":"1px solid",borderColor:"#939292",borderRadius:2,px:4,pos:"relative",mt:4,children:[n.jsxs(_,{spacing:4,align:"start",children:[n.jsx(b,{as:xe,color:"primary.500",boxSize:8}),n.jsxs(z,{spacing:2,children:[n.jsx(_,{spacing:4,children:n.jsxs(m,{fontSize:{base:"14px",md:"18px"},children:[e==null?void 0:e.street,e.street&&","," ",e==null?void 0:e.city,","," ",e==null?void 0:e.country]})}),n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:e==null?void 0:e.landmark})]})]}),n.jsx(fe,{onView:()=>V(e==null?void 0:e.id),onDelete:()=>D(e==null?void 0:e.id),onEdit:()=>I(e==null?void 0:e.id)})]},e.id),e.is_billing_address&&n.jsx(m,{fontStyle:"italic",fontSize:"sm",color:"#939292",children:"* This address is used for billing by default."})]},e.id)):n.jsx(n.Fragment,{children:n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})}),!p&&n.jsxs(_,{onClick:W,cursor:"pointer",color:"primary.500",mt:4,w:"fit-content",children:[n.jsx(b,{as:be,boxSize:6}),n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),n.jsxs(ye,{form:"shipping-address-form",isOpen:P,onClose:q,heading:s?"View Address":g?"Edit Address":"Add New Address",buttonText:o?"Update":"Add",onSubmit:F(T),isLoading:g?S.isPending:f.isPending,isDisabled:s,isHidden:s,children:[n.jsx(pe,{width:"full",label:"Country",options:ue,name:"country",isControlled:!0,isRequired:!s,placeholder:"Select Country",control:d,isReadOnly:s,errors:A}),n.jsx(y,{label:"City",control:d,isReadOnly:s,name:"city",isRequired:!s}),n.jsx(y,{label:"Street",control:d,isReadOnly:s,name:"street"}),n.jsx(y,{label:"Landmark",control:d,isReadOnly:s,name:"landmark"}),n.jsx(y,{label:"Recipient Name",control:d,isReadOnly:s,name:"recipient_name",isRequired:!s}),n.jsx(me,{defaultValue:r,handleChange:e=>{a(e.value)},name:"phone_number",label:"Phone Number",control:d,isReadOnly:s,errors:A,isRequired:!s}),n.jsx(he,{control:d,isReadOnly:s,name:"is_billing_address",label:"Set as default billing address"})]}),n.jsx(de,{heading:"Delete Address",message:"Are you sure you want to delete this address?",isOpen:L,isDeleting:k.isPending,onDelete:H,onClose:()=>{O(),c(null)}})]})};export{Ee as default};
