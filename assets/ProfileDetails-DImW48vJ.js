import{a9 as B,r as m,ba as G,a4 as U,j as e,F as h,T as w,ac as y,H as V}from"./index-CUUc0cew.js";import{R as z,c as A}from"./convertDate-Ct6UtIHY.js";import{P as H,S as L,c as X}from"./SelectInput-eC0meoch.js";import{a as d}from"./TextInput-DhCxxJ1g.js";import{o as Y,s as t,u as M,d as J,t as K}from"./zod-BjvxfETr.js";import{S as D,G as l}from"./chunk-ZPFGWTBB-CxxtjgU1.js";import"./x-Mazco6gl.js";import"./chunk-H46NUPBZ-Dwd-ZVdE.js";const Q=Y({name:t().min(1,{message:"Name is required"}),email:t().email({message:"Enter a valid email address"}).min(1,{message:"Email is required"}),phone_number:t().min(1,{message:"Phone number is required"}).min(8,{message:"Phone number should be atleast 8 digits"}).max(14,{message:"Phone number should not be 14 digits"}),dob:M([J(),t()]).optional(),country:t().min(1,{message:"Country is required"}),city:t().min(1,{message:"City is required"}),street:t().optional(),landmark:t().optional()}),re=()=>{var g,j,S,R;const s=B(),[n,u]=m.useState(!0),{mutateAsync:T,isPending:v,error:p,isError:F}=G(),{control:i,reset:x,handleSubmit:I,formState:{errors:r}}=U({defaultValues:{name:"",email:"",phone_number:"",country:"",city:"",street:"",landmark:"",country_code:"",dob:""},resolver:K(Q)}),[b,f]=m.useState((j=(g=s==null?void 0:s.shipping_details)==null?void 0:g[0])==null?void 0:j.country_code);if(m.useEffect(()=>{var o,c;const a=(c=(o=s==null?void 0:s.shipping_details)==null?void 0:o[0])==null?void 0:c.country_code;a&&f(a)},[s]),F){const a=(R=(S=p==null?void 0:p.response)==null?void 0:S.data)==null?void 0:R.errors;console.log(a)}m.useEffect(()=>{var a,o,c,_,C,O,P,k,E,q;s&&x({name:s.name??"",email:s.email??"",phone_number:((o=(a=s.shipping_details)==null?void 0:a[0])==null?void 0:o.phone_number)??"",dob:s.dob??"",country:((_=(c=s.shipping_details)==null?void 0:c[0])==null?void 0:_.country)??"",city:((O=(C=s.shipping_details)==null?void 0:C[0])==null?void 0:O.city)??"",street:((k=(P=s.shipping_details)==null?void 0:P[0])==null?void 0:k.street)??"",landmark:((q=(E=s.shipping_details)==null?void 0:E[0])==null?void 0:q.landmark)??""})},[s,x]);const N=async a=>{await T({...a,country_code:b,dob:A(a.dob)}),u(!0)};return e.jsxs(h,{as:"form",onSubmit:I(N),w:"full",flexDir:"column",gap:8,noValidate:!0,children:[e.jsxs(h,{flexDir:"column",gap:4,children:[e.jsx(w,{fontSize:"xl",children:"Profile Details"}),e.jsxs(D,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(l,{colSpan:1,children:e.jsx(d,{isReadOnly:n,isRequired:!n,name:"name",label:"Full Name",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(d,{isReadOnly:!0,name:"email",label:"Email",message:" * Email cannot be changed.",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(H,{defaultValue:b,handleChange:a=>{f(a.value)},name:"phone_number",label:"Phone Number",control:i,errors:r,isRequired:!n,isReadOnly:n})}),e.jsx(l,{colSpan:1,children:e.jsx(z,{isReadOnly:n,name:"dob",label:"Birthday (Optional)",control:i,errors:r})})]})]}),e.jsxs(h,{w:"full",flexDir:"column",gap:4,children:[e.jsx(w,{fontSize:"xl",children:"Billing Address"}),e.jsxs(D,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(l,{colSpan:1,children:e.jsx(L,{width:"full",label:"Country",options:X,name:"country",isControlled:!0,isRequired:!n,placeholder:"Select Country",control:i,isReadOnly:n,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(d,{isReadOnly:n,isRequired:!n,name:"city",label:"City",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(d,{isReadOnly:n,name:"street",label:"Street",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(d,{isReadOnly:n,name:"landmark",label:"Nearest Landmark",control:i,errors:r})})]})]}),n?e.jsx(y,{w:"fit-content",borderRadius:3,onClick:()=>u(!1),colorScheme:"primary",children:"Edit"}):e.jsxs(V,{w:"full",children:[e.jsx(y,{isLoading:v,borderRadius:3,type:"submit",colorScheme:"primary",children:"Update"}),e.jsx(y,{borderRadius:3,variant:"outline",onClick:()=>u(!0),colorScheme:"primary",children:"Cancel"})]})]})};export{re as default};
