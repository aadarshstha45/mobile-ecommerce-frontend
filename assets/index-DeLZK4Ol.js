import{r as f,l as M,n as T,p as L,j as t,C as N,F as R,S as A,T as O,s as V,B as z,M as _,t as D,H,U}from"./index-CC8fYiGp.js";import{d as W,c as $,I as J}from"./index-BcpG4eTw.js";import{L as k}from"./index-xdVRA84E.js";import{B as Q}from"./index-FvLxGZKg.js";import{s as q,C as G,a as K}from"./data-BCLL0QGy.js";import{S as X}from"./SelectInput-BHw3i3yi.js";import"./index-BGZ7iGN2.js";import"./GoogleIcon-gciiSm_m.js";import"./TextInput-Tx8eh13L.js";import"./x-Ddn6lHBe.js";import"./chunk-H46NUPBZ-DEa8JKZI.js";import"./auth-CpAT7S0t.js";import"./zod-NszXwpj8.js";import"./chunk-EC6XFFZH-CcQyQbqZ.js";import"./chunk-6SZ7MXCX-B3CvxHCK.js";import"./chunk-2EW3JUUD-BJzV3oQQ.js";import"./chunk-YQO7BFFX-AjF0CZ_j.js";import"./chunk-FHHZMTWR-CxGKSlM1.js";import"./shopping-bag-WH0lRxqv.js";import"./chevron-right-BFU8ApHA.js";var I=new Map,E=new WeakMap,F=0,Y=void 0;function Z(e){return e?(E.has(e)||(F+=1,E.set(e,F.toString())),E.get(e)):"0"}function ee(e){return Object.keys(e).sort().filter(s=>e[s]!==void 0).map(s=>`${s}_${s==="root"?Z(e.root):e[s]}`).toString()}function te(e){const s=ee(e);let i=I.get(s);if(!i){const l=new Map;let d;const n=new IntersectionObserver(o=>{o.forEach(r=>{var a;const g=r.isIntersecting&&d.some(u=>r.intersectionRatio>=u);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=g),(a=l.get(r.target))==null||a.forEach(u=>{u(g,r)})})},e);d=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:s,observer:n,elements:l},I.set(s,i)}return i}function se(e,s,i={},l=Y){if(typeof window.IntersectionObserver>"u"&&l!==void 0){const a=e.getBoundingClientRect();return s(l,{isIntersecting:l,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:d,observer:n,elements:o}=te(i),r=o.get(e)||[];return o.has(e)||o.set(e,r),r.push(s),n.observe(e),function(){r.splice(r.indexOf(s),1),r.length===0&&(o.delete(e),n.unobserve(e)),o.size===0&&(n.disconnect(),I.delete(d))}}function re({threshold:e,delay:s,trackVisibility:i,rootMargin:l,root:d,triggerOnce:n,skip:o,initialInView:r,fallbackInView:a,onChange:g}={}){var u;const[j,b]=f.useState(null),w=f.useRef(),[x,P]=f.useState({inView:!!r,entry:void 0});w.current=g,f.useEffect(()=>{if(o||!j)return;let m;return m=se(j,(B,C)=>{P({inView:B,entry:C}),w.current&&w.current(B,C),C.isIntersecting&&n&&m&&(m(),m=void 0)},{root:d,rootMargin:l,threshold:e,trackVisibility:i,delay:s},a),()=>{m&&m()}},[Array.isArray(e)?e.toString():e,j,d,l,n,o,i,a,s]);const v=(u=x.entry)==null?void 0:u.target,y=f.useRef();!j&&v&&!n&&!o&&y.current!==v&&(y.current=v,P({inView:!!r,entry:void 0}));const p=[b,x.inView,x.entry];return p.ref=p[0],p.inView=p[1],p.entry=p[2],p}const Ce=()=>{const{ref:e,inView:s}=re(),[i,l]=f.useState(""),d=M(),[n]=T("(max-width: 540px)"),o=L(),r=o.pathname.split("/")[1].replace(/-/g," "),a=new URLSearchParams(o.search),g=a.get("sort")||"",[u,j]=f.useState([]),[b,w]=f.useState([]),{data:x,fetchNextPage:P,isFetchingNextPage:v,hasNextPage:y,isPending:p}=W(i,JSON.stringify(u),JSON.stringify(b));f.useEffect(()=>{l(g)},[g]),f.useEffect(()=>{s&&y&&!v&&P()},[s,y,v]);const m=h=>{l(h.value),h.value!==""&&(a.set("sort",h.value),d(`?${a.toString()}`))},B=(h,S)=>{j(h.target.checked?[...u,S]:u.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})},C=(h,S)=>{w(h.target.checked?[...b,S]:b.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})};return t.jsxs(N,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw"},py:10,children:[t.jsxs(R,{gap:4,flexDir:n?"column":"row",justify:n?"center":"space-between",align:n?"start":"space-between",children:[t.jsxs(A,{gap:2,children:[t.jsx(O,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,textTransform:"capitalize",children:r}),t.jsx(Q,{})]}),t.jsx(X,{isControlled:!1,value:i,placeholder:"Sort by",name:"sort",handleChange:m,options:q})]}),t.jsxs(R,{py:10,gap:4,children:[t.jsx(R,{w:{sm:"200px",md:"250px"},display:{base:"none",sm:"flex"},minH:window.innerHeight,children:t.jsxs(R,{flexDir:"column",gap:4,w:"full",children:[t.jsx(G,{}),t.jsx(K,{handleSizeSelect:B,handleColorSelect:C})]})}),p?t.jsx(V,{}):t.jsxs(R,{flexDir:"column",gap:4,w:"full",children:[x==null?void 0:x.pages.map((h,S)=>t.jsxs(z,{children:[t.jsx(_,{columnsCountBreakPoints:$,children:t.jsx(D,{gutter:n?"10px":"20px",children:h.data.map(c=>t.jsx(J,{data:c,discountPercent:c==null?void 0:c.discount,colorOptions:(c==null?void 0:c.product_properties)&&c.product_properties},c.id))})}),")"]},S)),t.jsx(z,{ref:e,h:"1px"}),t.jsx(H,{gap:4,py:10,align:"center",justify:"center",children:v&&t.jsx(U,{as:k,boxSize:20})})]})]})]})};export{Ce as default};
