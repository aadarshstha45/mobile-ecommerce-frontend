import{r as d,c as M,d as T,e as A,j as t,C as L,F as R,S as N,T as O,g as V,B as z,M as _,h as D,ab as H,A as W}from"./index-BYmqbv07.js";import{d as $,c as J,I as U}from"./index-Z6CNjjJ5.js";import{L as k}from"./index-CI_oaxHb.js";import{B as Q}from"./index-BmpHLAiZ.js";import{s as q,C as G,a as K}from"./data-WuYLRPIz.js";import{S as X}from"./SelectInput--iFOlXvJ.js";import"./index-BduA1reo.js";import"./GoogleIcon-3xkG-s3M.js";import"./TextInput-K6lDEhx3.js";import"./x-BBophU20.js";import"./chunk-H46NUPBZ-B5mpJdB5.js";import"./auth-BIk5aCbF.js";import"./zod-BizRYsHx.js";import"./chunk-EC6XFFZH-smMCEvNa.js";import"./chunk-6SZ7MXCX-DrcNBBeP.js";import"./chunk-2EW3JUUD-DPIsEr5f.js";import"./chunk-YQO7BFFX-BUP1xbO7.js";import"./chunk-FHHZMTWR-Cnr-ZuDL.js";import"./shopping-bag-DY6XiWgj.js";import"./chevron-right-Dsg0XuLI.js";var I=new Map,E=new WeakMap,F=0,Y=void 0;function Z(e){return e?(E.has(e)||(F+=1,E.set(e,F.toString())),E.get(e)):"0"}function ee(e){return Object.keys(e).sort().filter(s=>e[s]!==void 0).map(s=>`${s}_${s==="root"?Z(e.root):e[s]}`).toString()}function te(e){const s=ee(e);let i=I.get(s);if(!i){const l=new Map;let f;const n=new IntersectionObserver(o=>{o.forEach(r=>{var a;const g=r.isIntersecting&&f.some(u=>r.intersectionRatio>=u);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=g),(a=l.get(r.target))==null||a.forEach(u=>{u(g,r)})})},e);f=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:s,observer:n,elements:l},I.set(s,i)}return i}function se(e,s,i={},l=Y){if(typeof window.IntersectionObserver>"u"&&l!==void 0){const a=e.getBoundingClientRect();return s(l,{isIntersecting:l,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:f,observer:n,elements:o}=te(i),r=o.get(e)||[];return o.has(e)||o.set(e,r),r.push(s),n.observe(e),function(){r.splice(r.indexOf(s),1),r.length===0&&(o.delete(e),n.unobserve(e)),o.size===0&&(n.disconnect(),I.delete(f))}}function re({threshold:e,delay:s,trackVisibility:i,rootMargin:l,root:f,triggerOnce:n,skip:o,initialInView:r,fallbackInView:a,onChange:g}={}){var u;const[b,j]=d.useState(null),w=d.useRef(),[x,P]=d.useState({inView:!!r,entry:void 0});w.current=g,d.useEffect(()=>{if(o||!b)return;let m;return m=se(b,(B,C)=>{P({inView:B,entry:C}),w.current&&w.current(B,C),C.isIntersecting&&n&&m&&(m(),m=void 0)},{root:f,rootMargin:l,threshold:e,trackVisibility:i,delay:s},a),()=>{m&&m()}},[Array.isArray(e)?e.toString():e,b,f,l,n,o,i,a,s]);const v=(u=x.entry)==null?void 0:u.target,y=d.useRef();!b&&v&&!n&&!o&&y.current!==v&&(y.current=v,P({inView:!!r,entry:void 0}));const p=[j,x.inView,x.entry];return p.ref=p[0],p.inView=p[1],p.entry=p[2],p}const Ce=()=>{const{ref:e,inView:s}=re(),[i,l]=d.useState(""),f=M(),[n]=T("(max-width: 540px)"),o=A(),r=o.pathname.split("/")[1].replace(/-/g," "),a=new URLSearchParams(o.search),g=a.get("sort")||"",[u,b]=d.useState([]),[j,w]=d.useState([]),{data:x,fetchNextPage:P,isFetchingNextPage:v,hasNextPage:y,isPending:p}=$(i,JSON.stringify(u),JSON.stringify(j));d.useEffect(()=>{l(g)},[g]),d.useEffect(()=>{s&&y&&!v&&P()},[s,y,v]);const m=h=>{l(h.value),h.value!==""&&(a.set("sort",h.value),f(`?${a.toString()}`))},B=(h,S)=>{b(h.target.checked?[...u,S]:u.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})},C=(h,S)=>{w(h.target.checked?[...j,S]:j.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})};return t.jsxs(L,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw"},py:10,children:[t.jsxs(R,{gap:4,flexDir:n?"column":"row",justify:n?"center":"space-between",align:n?"start":"space-between",children:[t.jsxs(N,{gap:2,children:[t.jsx(O,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,textTransform:"capitalize",children:r}),t.jsx(Q,{})]}),t.jsx(X,{isControlled:!1,value:i,placeholder:"Sort by",name:"sort",handleChange:m,options:q})]}),t.jsxs(R,{py:10,gap:4,children:[t.jsx(R,{w:{sm:"200px",md:"250px"},display:{base:"none",sm:"flex"},minH:window.innerHeight,children:t.jsxs(R,{flexDir:"column",gap:4,w:"full",children:[t.jsx(G,{}),t.jsx(K,{handleSizeSelect:B,handleColorSelect:C})]})}),p?t.jsx(V,{}):t.jsxs(R,{flexDir:"column",gap:4,w:"full",children:[x==null?void 0:x.pages.map((h,S)=>t.jsxs(z,{children:[t.jsx(_,{columnsCountBreakPoints:J,children:t.jsx(D,{gutter:n?"10px":"20px",children:h.data.map(c=>t.jsx(U,{data:c,discountPercent:c==null?void 0:c.discount,colorOptions:(c==null?void 0:c.product_properties)&&c.product_properties},c.id))})}),")"]},S)),t.jsx(z,{ref:e,h:"1px"}),t.jsx(H,{gap:4,py:10,align:"center",justify:"center",children:v&&t.jsx(W,{as:k,boxSize:20})})]})]})]})};export{Ce as default};
