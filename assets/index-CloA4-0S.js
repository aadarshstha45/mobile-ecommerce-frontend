import{j as e,L as F,F as w,a0 as $,I as M,T as h,r as v,aj as I,ak as k,al as H,am as _,aH as A,an as E,a3 as O,H as V,ad as q,aI as D,aJ as N,Z as R,q as G}from"./index-Yda58qFj.js";import{a as J,b as W,c as X}from"./index-DcclNu7R.js";import{T as z,a as P,b as B,c as b,d as c,e as L,f as m}from"./chunk-MGVPL3OH-CwORRXwn.js";import{u as Y,C as Z}from"./index.esm-ZK9cSZJR.js";import"./SelectInput-1jxHcoUW.js";import{a as K}from"./TextInput-C9tdSzdn.js";import{R as Q}from"./review-DM6SNh_Q.js";import{t as U}from"./zod-gmS_9dNm.js";import{F as T}from"./chunk-H46NUPBZ-BnaCg10E.js";import{R as ee,a as se}from"./chunk-RDF2AYID-DuVQlzs8.js";import{T as ae,a as re,b as oe,c as te,d as C}from"./chunk-IAXSQ4X2-DhnKQl5Z.js";import"./X-DI5PdmoX.js";const ne=()=>{const{data:r,isPending:t}=J();return t?e.jsx(F,{}):r&&r.length>0?e.jsx(z,{children:e.jsxs(P,{colorScheme:"primary",children:[e.jsx(B,{children:e.jsxs(b,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{children:"Rating"}),e.jsx(c,{children:"Review"})]})}),e.jsx(L,{children:r.map((s,n)=>{var o,i,d;return e.jsxs(b,{children:[e.jsx(m,{children:e.jsxs(w,{gap:4,as:$,to:s.subcategory?`/products/${(o=s.category)==null?void 0:o.slug}/${(i=s.subcategory)==null?void 0:i.slug}/${s.id}`:`/products/${(d=s.category)==null?void 0:d.slug}/${s.id}`,children:[e.jsx(M,{src:s.product.image,alt:s.product.name,boxSize:"100px",objectFit:"cover"}),e.jsx(h,{children:s.product.name})]})}),e.jsx(m,{children:s.rating}),e.jsx(m,{children:s.review})]},n)})})]})}):e.jsx(h,{children:"No reviews found"})},ie=({onClose:r,isOpen:t,productId:s})=>{const[n,o]=v.useState(-1),{control:i,handleSubmit:d,setValue:j,reset:f,formState:{errors:a}}=Y({defaultValues:{product_id:s,rating:0,review:""},resolver:U(Q)});v.useEffect(()=>{s!==null&&j("product_id",s)},[s,j]);const{mutateAsync:y,isPending:u}=W(),p=async g=>{await y(g),r()},x=()=>{r(),f(),o(-1)};return e.jsxs(I,{isOpen:t,onClose:x,motionPreset:"slideInTop",children:[e.jsx(k,{}),e.jsxs(H,{children:[e.jsx(_,{}),e.jsx(A,{children:"Add Review"}),e.jsx(E,{children:e.jsxs("form",{onSubmit:d(p),id:"review-form",noValidate:!0,children:[e.jsxs(O,{mb:4,children:[e.jsx(T,{mb:2,fontSize:{sm:"14px",md:"16px"},fontWeight:450,children:"Rating"}),e.jsx(Z,{name:"rating",control:i,render:({field:{onChange:g,value:S}})=>e.jsx(ee,{value:S.toString(),onChange:g,onMouseLeave:()=>o(-1),children:e.jsx(V,{gap:0,children:[...Array(5)].map((ce,l)=>e.jsxs(T,{htmlFor:`rating_${l}`,onMouseEnter:()=>o(l+1),onClick:()=>g(l+1),cursor:"pointer",children:[e.jsx(q,{weight:"fill",color:l<(n>=0?n:S)?"yellow.400":"gray.300"}),e.jsx(se,{display:"none",id:`rating_${l}`,value:(l+1).toString()})]},l))})})}),a.rating&&e.jsx(D,{color:"red.400",fontSize:{base:"14px",md:"16px"},fontStyle:"italic",children:a.rating.message})]}),e.jsx(K,{errors:a,type:"textarea",control:i,name:"review",label:"Review",isRequired:!0})]})}),e.jsxs(N,{gap:1,children:[e.jsx(R,{size:"sm",colorScheme:"gray",variant:"outline",onClick:x,children:"Cancel"}),e.jsx(R,{size:"sm",form:"review-form",type:"submit",isLoading:u,children:"Submit"})]})]})]})},le=()=>{const{data:r,isPending:t}=X(),[s,n]=v.useState(null),{isOpen:o,onOpen:i,onClose:d}=G(),j=a=>{n(a),i()},f=()=>{n(null),d()};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{onClose:f,isOpen:o,productId:s}),t?e.jsx(F,{}):r&&r.length>0?e.jsx(z,{children:e.jsxs(P,{colorScheme:"primary",children:[e.jsx(B,{children:e.jsxs(b,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{}),e.jsx(c,{children:"Review"})]})}),e.jsx(L,{children:r.map((a,y)=>{var u,p,x;return e.jsxs(b,{children:[e.jsx(m,{children:e.jsxs(w,{gap:4,as:$,to:a.subcategory?`/products/${(u=a.category)==null?void 0:u.slug}/${(p=a.subcategory)==null?void 0:p.slug}/${a.id}`:`/products/${(x=a.category)==null?void 0:x.slug}/${a.id}`,children:[e.jsx(M,{src:a.image,alt:a.name,w:{base:"100px",md:"150px"},aspectRatio:1/1}),e.jsx(h,{fontSize:{base:"14px",md:"16px",lg:"18px"},children:a.name})]})}),e.jsx(m,{}),e.jsx(m,{children:e.jsx(R,{onClick:()=>j(a.id),variant:"outline",children:"Review"})})]},y)})})]})}):e.jsx(h,{children:"No orders left to be reviewed"})]})},de=[{name:"To Review"},{name:"Reviewed"}],we=()=>e.jsxs(w,{w:"full",flexDir:"column",gap:4,children:[e.jsx(h,{fontSize:"xl",children:"My Reviews"}),e.jsxs(ae,{isLazy:!0,position:"relative",variant:"unstyled",children:[e.jsx(re,{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",children:de.map((r,t)=>e.jsx(oe,{_selected:{borderBottomColor:"primary.500"},borderBottom:"6px solid",borderBottomColor:"primary.50",fontSize:{base:"sm",md:"md",xl:"lg"},whiteSpace:"nowrap",transition:"border-bottom 0.2s ease-in-out",children:r.name},t))}),e.jsxs(te,{mt:8,children:[e.jsx(C,{p:0,children:e.jsx(le,{})}),e.jsx(C,{p:0,children:e.jsx(ne,{})})]})]})]});export{we as default};
