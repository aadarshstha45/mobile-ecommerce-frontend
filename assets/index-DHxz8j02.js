import{j as e,L as T,F as f,a4 as R,I as v,T as x,V as z,r as w,am as L,an as B,ao as I,ap as O,aF as k,aq as A,aG as E,a2 as h,Q as V}from"./index-C3jGOrgU.js";import{a as _,b as H,c as N}from"./index-CLVL6wUF.js";import{T as S,a as F,b as $,d as c,e as P,c as C,f as d}from"./chunk-MGVPL3OH-C5hdX6kP.js";import"./SelectInput-BXpq3Bwb.js";import{a as b}from"./TextInput-vI1Rq1qZ.js";import{T as q,b as D,c as G,d as Q,e as y}from"./chunk-IAXSQ4X2-DhwmF1-W.js";import"./chunk-H46NUPBZ-Bv4iI0Nv.js";import"./x-CwDdJ-ss.js";const J=()=>{const{data:n,isPending:i}=_();return i?e.jsx(T,{}):n&&n.length>0?e.jsx(S,{children:e.jsxs(F,{colorScheme:"primary",children:[e.jsxs($,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{children:"Rating"}),e.jsx(c,{children:"Review"})]}),e.jsx(P,{children:n.map((s,t)=>{var o,r,l;return e.jsxs(C,{children:[e.jsx(d,{children:e.jsxs(f,{gap:4,as:R,to:s.subcategory?`/products/${(o=s.category)==null?void 0:o.slug}/${(r=s.subcategory)==null?void 0:r.slug}/${s.id}`:`/products/${(l=s.category)==null?void 0:l.slug}/${s.id}`,children:[e.jsx(v,{src:s.product.image,alt:s.product.name,boxSize:"100px",objectFit:"cover"}),e.jsx(x,{children:s.product.name})]})}),e.jsx(d,{children:s.rating}),e.jsx(d,{children:s.review})]},t)})})]})}):e.jsx(x,{children:"No reviews found"})},K=({onClose:n,isOpen:i,productId:s})=>{const{control:t,handleSubmit:o,setValue:r}=z({defaultValues:{product_id:s,rating:4,review:"Hello"}});w.useEffect(()=>{s!==null&&r("product_id",s)},[s,r]);const{mutateAsync:l,isPending:m}=H(),j=async a=>{await l(a),n()};return e.jsxs(L,{isOpen:i,onClose:n,motionPreset:"slideInTop",children:[e.jsx(B,{}),e.jsxs(I,{children:[e.jsx(O,{}),e.jsx(k,{children:"Add Review"}),e.jsx(A,{children:e.jsxs("form",{onSubmit:o(j),id:"review-form",children:[e.jsx(b,{control:t,name:"rating",label:"Rating"}),e.jsx(b,{type:"textarea",control:t,name:"review",label:"Review"})]})}),e.jsxs(E,{gap:1,children:[e.jsx(h,{size:"sm",colorScheme:"gray",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(h,{size:"sm",form:"review-form",type:"submit",isLoading:m,children:"Submit"})]})]})]})},U=()=>{const{data:n,isPending:i}=N(),[s,t]=w.useState(null),{isOpen:o,onOpen:r,onClose:l}=V(),m=a=>{t(a),r()},j=()=>{t(null),l()};return e.jsxs(e.Fragment,{children:[e.jsx(K,{onClose:j,isOpen:o,productId:s}),i?e.jsx(T,{}):n&&n.length>0?e.jsx(S,{children:e.jsxs(F,{colorScheme:"primary",children:[e.jsxs($,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{}),e.jsx(c,{children:"Review"})]}),e.jsx(P,{children:n.map((a,M)=>{var u,p,g;return e.jsxs(C,{children:[e.jsx(d,{children:e.jsxs(f,{gap:4,as:R,to:a.subcategory?`/products/${(u=a.category)==null?void 0:u.slug}/${(p=a.subcategory)==null?void 0:p.slug}/${a.id}`:`/products/${(g=a.category)==null?void 0:g.slug}/${a.id}`,children:[e.jsx(v,{src:a.image,alt:a.name,w:{base:"100px",md:"150px"},aspectRatio:1/1}),e.jsx(x,{fontSize:{base:"14px",md:"16px",lg:"18px"},children:a.name})]})}),e.jsx(d,{}),e.jsx(d,{children:e.jsx(h,{onClick:()=>m(a.id),variant:"outline",children:"Review"})})]},M)})})]})}):e.jsx(x,{children:"No orders left to be reviewed"})]})},W=[{name:"To Review"},{name:"Reviewed"}],te=()=>e.jsxs(q,{isLazy:!0,position:"relative",variant:"unstyled",children:[e.jsx(D,{children:W.map((n,i)=>e.jsx(G,{_selected:{textColor:"white",bg:"primary.500",borderRadius:2},fontSize:{base:"sm",md:"md",xl:"lg"},children:n.name},i))}),e.jsxs(Q,{mt:8,children:[e.jsx(y,{p:0,children:e.jsx(U,{})}),e.jsx(y,{p:0,children:e.jsx(J,{})})]})]});export{te as default};
