import{w,r as S,aW as F,W as _,j as e,aV as R,U as v,F as g,O as A,T as a,K as P,B as z,y as j,at as u,S as I,a3 as C,aG as D}from"./index-6Sn1wWIr.js";import{u as N}from"./orderStore-21ZcMGi7.js";import{P as M}from"./PhoneInput-CljkUCrD.js";import{S as O,c as V,C as q}from"./SelectInput-E5lVSjN8.js";import{T as l}from"./TextInput-4LPB1q68.js";import{C as L,M as T}from"./Checkbox-Bf4HFy62.js";import{M as B}from"./ModalForm-CPa9EeY8.js";import{C as E}from"./circle-plus-BGa5HcfF.js";import{R as G,a as W}from"./chunk-RDF2AYID-C8DuErr3.js";import{F as H}from"./chunk-H46NUPBZ-BIQUfnnc.js";import"./index.esm-B3QB1eKF.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),U=({isOpen:c,onClose:t})=>{const[d,m]=S.useState("Nepal"),[x,p]=S.useState("+977"),n=F(),{control:r,handleSubmit:h,formState:{errors:f}}=_({defaultValues:{country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}}),b=async s=>{await n.mutateAsync({...s,country:d,country_code:x}),t()};return e.jsxs(B,{form:"shipping-address-form",isOpen:c,onClose:t,heading:"Add Address",onSubmit:h(b),isLoading:n.isPending,isDisabled:n.isPending,children:[e.jsx(O,{width:"full",label:"Country",options:V,name:"country",isControlled:!0,isRequired:!0,defaultValue:d,handleChange:s=>{console.log(s),m(s.value),p(s.dial_code)},placeholder:"Select Country",control:r}),e.jsx(l,{label:"City",control:r,name:"city",isRequired:!0}),e.jsx(l,{label:"Address",control:r,name:"address"}),e.jsx(l,{label:"Street",control:r,name:"street"}),e.jsx(l,{label:"Landmark",control:r,name:"landmark"}),e.jsx(l,{label:"Recipient Name",control:r,name:"recipient_name",isRequired:!0}),e.jsx(M,{defaultValue:q,handleChange:s=>{m(s.name),p(s.value)},name:"phone_number",label:"Phone Number",control:r,errors:f,isRequired:!0}),e.jsx(L,{control:r,name:"is_billing_address",label:"Set as default billing address"})]})},te=({stepProps:c})=>{const{data:t,isRefetching:d}=R(),{stepData:m,setStepData:x}=N(),{isOpen:p,onOpen:n,onClose:r}=v(),{control:h,handleSubmit:f}=_({defaultValues:{delivery_address_id:""}}),b=o=>{if(!o.delivery_address_id){D.error("Please select a delivery address");return}x({...m,delivery_address_id:o.delivery_address_id}),c.nextStep()},s=()=>{c.prevStep()};return e.jsxs(g,{flexDir:"column",gap:4,children:[e.jsxs("form",{id:"shipping-details-form",onSubmit:f(b),children:[e.jsx(A,{name:"delivery_address_id",control:h,render:({field:{value:o,onChange:k}})=>e.jsx(G,{value:o,onChange:k,children:e.jsxs(g,{w:"full",flexDir:"column",gap:4,children:[e.jsx(a,{fontSize:"xl",children:"Select Delivery Address"}),d?e.jsx("div",{className:"loader"}):t&&t.length>0?t.map((i,y)=>e.jsxs(P,{children:[e.jsxs(H,{bg:parseInt(o)===i.id?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:parseInt(o)===i.id?"2px solid":"1px solid",borderRadius:2,p:4,pos:"relative",borderColor:parseInt(o)===i.id?"green":"#000",htmlFor:i.id,children:[e.jsx(z,{bg:"green",w:4,h:4,pos:"absolute",top:2,right:2,display:parseInt(o)===i.id?"block":"none",overflow:"hidden",children:e.jsx(j,{as:K,color:"white",boxSize:4})}),e.jsxs(u,{spacing:4,align:"start",children:[e.jsx(j,{as:T,color:"primary.500",boxSize:8}),e.jsxs(I,{spacing:2,children:[e.jsx(u,{spacing:4,children:e.jsxs(a,{fontSize:{base:"14px",md:"18px"},children:[i.address&&i.address+","," ",(i==null?void 0:i.street)&&(i==null?void 0:i.street)+","," ",i==null?void 0:i.city,",",i==null?void 0:i.country]})}),e.jsx(a,{fontSize:{base:"14px",md:"18px"},children:i==null?void 0:i.landmark})]})]})]}),e.jsx(W,{isChecked:o===i.id,id:i.id,value:i.id,display:"none"},y)]},y)):e.jsx(a,{pb:4,fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})]})})}),e.jsxs(u,{onClick:n,cursor:"pointer",color:"primary.500",w:"fit-content",children:[e.jsx(j,{as:E,boxSize:6}),e.jsx(a,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),e.jsxs(u,{mt:6,justify:"space-between",children:[e.jsx(C,{colorScheme:"primary",w:"fit-content",borderRadius:"2px",onClick:s,size:"sm",children:"Previous"}),e.jsx(C,{colorScheme:"primary",w:"fit-content",borderRadius:"2PX",size:"sm",type:"submit",form:"shipping-details-form",children:"Next"})]})]}),e.jsx(U,{isOpen:p,onClose:r})]})};export{te as default};
