import{u as B,a as E,b as L,c as D,r as a,d as M,j as s,C as _,L as j,F as n,S as k,T as S,M as I,e as N}from"./index-CjMTo5K3.js";import{B as R}from"./index-CltgwPlP.js";import{S as T}from"./SelectInput-CsXsqzP9.js";import{c as U,I as z}from"./index-Bxaf2EVv.js";import{P as W}from"./PaginationButton-mh03zxa7.js";import{s as q}from"./data-BjPZZWce.js";import"./chevron-right-CVCaZrRX.js";import"./chunk-H46NUPBZ-3MtO_oMd.js";import"./index-BgYDWQw4.js";import"./GoogleIcon-DDsVtFCt.js";import"./TextInput-DMFAb_np.js";import"./x-BO8iIHbQ.js";import"./auth-DQFMyoN7.js";import"./zod-BsI7OYO9.js";import"./chunk-EC6XFFZH-QL08M3Ba.js";import"./index-DQqJJrFv.js";import"./chunk-2EW3JUUD-z4RRGOG-.js";import"./chunk-YQO7BFFX--yn25mem.js";import"./chunk-FHHZMTWR-DDK670cj.js";import"./shopping-bag-D-RPX0az.js";function cs(){var x,d,h,f;const{category_slug:l,slug:i}=B(),P=E(),[o]=L("(max-width: 540px)"),y=D(),r=new URLSearchParams(y.search),c=Number(r.get("page"))||1,m=r.get("sort")||"",[b,u]=a.useState(1),[p,g]=a.useState("");if(!i)throw new Error("Slug is required");const w=l?{category_slug:l,slug:i}:i,{data:e,isPending:v,isFetching:C}=M(c,w,p);a.useEffect(()=>{u(c)},[c]),a.useEffect(()=>{g(m)},[m]);const F=t=>{g(t.value),t.value!==""&&(r.set("page","1"),r.set("sort",t.value),P(`?${r.toString()}`))};return s.jsx(_,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw",lg:"80vw"},py:10,children:v?s.jsx(j,{}):s.jsxs(s.Fragment,{children:[s.jsxs(n,{gap:4,flexDir:o?"column":"row",justify:o?"center":"space-between",align:o?"start":"space-between",children:[s.jsxs(k,{gap:2,children:[s.jsx(S,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,children:(x=e==null?void 0:e.breadcrumbs)==null?void 0:x.category.name}),s.jsx(R,{})]}),s.jsx(T,{isControlled:!1,value:p,placeholder:"Sort by",name:"sort",handleChange:F,options:q})]}),s.jsxs(n,{mt:-6,flexDir:"column",gap:4,children:[s.jsx(n,{gap:4,mt:12,children:s.jsx(n,{flexDir:"column",w:{base:"full"},children:C?s.jsx(j,{}):e&&((d=e.data)==null?void 0:d.length)>0?s.jsx(I,{columnsCountBreakPoints:U,children:s.jsx(N,{gutter:o?"10px":"20px",children:e==null?void 0:e.data.map(t=>s.jsx(z,{data:t,discountPercent:t==null?void 0:t.discount},t.id))})}):s.jsx(S,{fontSize:"xl",children:"No products found"})})}),(e==null?void 0:e.pagination.total_items)>12&&s.jsx(W,{currentPage:((h=e==null?void 0:e.pagination)==null?void 0:h.current_page)??b,setCurrentPage:u,totalPages:((f=e==null?void 0:e.pagination)==null?void 0:f.total_pages)??2,sort:p})]})]})})}export{cs as default};
