import{aR as y,aw as B,j as e,L as w,F as f,a4 as S,I as P,T as x,V as A,r as F,aC as O,aD as V,aE as k,aF as I,aS as D,aG as H,aT as N,a2 as m,Q as _}from"./index-CL8XLKom.js";import{T as $,a as M,b as C,d,e as E,c as z,f as l}from"./chunk-MGVPL3OH-ZZtenwiG.js";import"./SelectInput-D4BtyVVY.js";import{a as T}from"./TextInput-vvWYu-yc.js";import{T as G,a as Q,b as v,c as q,d as J,e as R}from"./chunk-IAXSQ4X2-kwFeSHD-.js";import"./chunk-H46NUPBZ-q2gi2f9t.js";import"./x-CAMzUkDM.js";const u={add:"/product-review",getTo:"/product-to-be-reviewed",getReviewed:"/product-review"},K=()=>B({apiEndPoint:u.add,inValidateEndpoint:u.getTo,message:"Review added successfully"}),U=()=>y({apiEndPoint:u.getTo}),W=()=>y({apiEndPoint:u.getReviewed}),X=()=>{const{data:n,isPending:c}=W();return c?e.jsx(w,{}):n&&n.length>0?e.jsx($,{children:e.jsxs(M,{colorScheme:"primary",children:[e.jsxs(C,{children:[e.jsx(d,{children:"Product"}),e.jsx(d,{children:"Rating"}),e.jsx(d,{children:"Review"})]}),e.jsx(E,{children:n.map((s,t)=>{var o,i,r;return e.jsxs(z,{children:[e.jsx(l,{children:e.jsxs(f,{gap:4,as:S,to:s.subcategory?`/products/${(o=s.category)==null?void 0:o.slug}/${(i=s.subcategory)==null?void 0:i.slug}/${s.id}`:`/products/${(r=s.category)==null?void 0:r.slug}/${s.id}`,children:[e.jsx(P,{src:s.product.image,alt:s.product.name,boxSize:"100px",objectFit:"cover"}),e.jsx(x,{children:s.product.name})]})}),e.jsx(l,{children:s.rating}),e.jsx(l,{children:s.review})]},t)})})]})}):e.jsx(x,{children:"No reviews found"})},Y=({onClose:n,isOpen:c,productId:s})=>{console.log(s);const{control:t,handleSubmit:o,setValue:i}=A({defaultValues:{product_id:s,rating:4,review:"Hello"}});F.useEffect(()=>{s!==null&&i("product_id",s)},[s,i]);const{mutateAsync:r,isPending:j}=K(),h=async a=>{await r(a),n()};return e.jsxs(O,{isOpen:c,onClose:n,children:[e.jsx(V,{}),e.jsxs(k,{children:[e.jsx(I,{}),e.jsx(D,{children:"Add Review"}),e.jsx(H,{children:e.jsxs("form",{onSubmit:o(h),id:"review-form",children:[e.jsx(T,{control:t,name:"rating",label:"Rating"}),e.jsx(T,{type:"textarea",control:t,name:"review",label:"Review"})]})}),e.jsxs(N,{gap:1,children:[e.jsx(m,{size:"sm",colorScheme:"gray",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(m,{size:"sm",form:"review-form",type:"submit",isLoading:j,children:"Submit"})]})]})]})},Z=()=>{const{data:n,isPending:c}=U(),[s,t]=F.useState(null),{isOpen:o,onOpen:i,onClose:r}=_(),j=a=>{console.log(a),t(a),i()},h=()=>{t(null),r()};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{onClose:h,isOpen:o,productId:s}),c?e.jsx(w,{}):n&&n.length>0?e.jsx($,{children:e.jsxs(M,{colorScheme:"primary",children:[e.jsxs(C,{children:[e.jsx(d,{children:"Product"}),e.jsx(d,{}),e.jsx(d,{children:"Review"})]}),e.jsx(E,{children:n.map((a,L)=>{var p,g,b;return e.jsxs(z,{children:[e.jsx(l,{children:e.jsxs(f,{gap:4,as:S,to:a.subcategory?`/products/${(p=a.category)==null?void 0:p.slug}/${(g=a.subcategory)==null?void 0:g.slug}/${a.id}`:`/products/${(b=a.category)==null?void 0:b.slug}/${a.id}`,children:[e.jsx(P,{src:a.image,alt:a.name,w:{base:"100px",md:"150px"},aspectRatio:1/1}),e.jsx(x,{fontSize:{base:"14px",md:"16px",lg:"18px"},children:a.name})]})}),e.jsx(l,{}),e.jsx(l,{children:e.jsx(m,{onClick:()=>j(a.id),variant:"outline",children:"Review"})})]},L)})})]})}):e.jsx(x,{children:"No orders left to be reviewed"})]})},re=()=>e.jsxs(G,{isLazy:!0,position:"relative",variant:"unstyled",children:[e.jsxs(Q,{children:[e.jsx(v,{fontSize:{base:"sm",md:"md",xl:"lg"},children:"To Review"}),e.jsx(v,{fontSize:{base:"sm",md:"md",xl:"lg"},children:"Reviewed"})]}),e.jsx(q,{mt:"-1.5px",height:"4px",bg:"primary.500",borderRadius:"1px"}),e.jsxs(J,{mt:8,children:[e.jsx(R,{p:0,children:e.jsx(Z,{})}),e.jsx(R,{p:0,children:e.jsx(X,{})})]})]});export{re as default};
