import{u as B,a as E,b as L,c as D,r as a,d as M,j as s,C as _,L as j,F as n,S as k,T as S,M as I,e as N}from"./index--ZeW-1SI.js";import{B as R}from"./index-CopX-QD6.js";import{S as T}from"./SelectInput-_7_tGWTh.js";import{c as U,I as z}from"./index-DA52rhom.js";import{P as W}from"./PaginationButton-juFLtibx.js";import{s as q}from"./data-9b5u404L.js";import"./chevron-right-D_TpNuRE.js";import"./chunk-H46NUPBZ-BeOsnN-u.js";import"./index-BR7D5q_Y.js";import"./index-C76BBuD7.js";import"./chunk-2EW3JUUD-BwlU0vii.js";import"./chunk-YQO7BFFX-D0b2JdOv.js";import"./chunk-FHHZMTWR-BgpogAEP.js";import"./shopping-bag-_hUQND5B.js";function ts(){var x,d,h,f;const{category_slug:p,slug:i}=B(),w=E(),[o]=L("(max-width: 540px)"),P=D(),r=new URLSearchParams(P.search),c=Number(r.get("page"))||1,u=r.get("sort")||"newest",[y,m]=a.useState(1),[l,g]=a.useState("newest");if(!i)throw new Error("Slug is required");const b=p?{category_slug:p,slug:i}:i,{data:e,isPending:v,isFetching:C}=M(c,b,l);a.useEffect(()=>{m(c)},[c]),a.useEffect(()=>{g(u)},[u]);const F=t=>{g(t.value),t.value!==""&&(r.set("page","1"),r.set("sort",t.value),w(`?${r.toString()}`))};return s.jsx(_,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw",lg:"80vw"},py:10,children:v?s.jsx(j,{}):s.jsxs(s.Fragment,{children:[s.jsxs(n,{gap:4,flexDir:o?"column":"row",justify:o?"center":"space-between",align:o?"start":"space-between",children:[s.jsxs(k,{gap:2,children:[s.jsx(S,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,children:(x=e==null?void 0:e.breadcrumbs)==null?void 0:x.category.name}),s.jsx(R,{})]}),s.jsx(T,{isControlled:!1,value:l,placeholder:"Sort by",name:"sort",handleChange:F,options:q})]}),s.jsxs(n,{mt:-6,flexDir:"column",gap:4,children:[s.jsx(n,{gap:4,mt:12,children:s.jsx(n,{flexDir:"column",w:{base:"full"},children:C?s.jsx(j,{}):e&&((d=e.data)==null?void 0:d.length)>0?s.jsx(I,{columnsCountBreakPoints:U,children:s.jsx(N,{gutter:o?"10px":"20px",children:e==null?void 0:e.data.map(t=>s.jsx(z,{data:t,discountPercent:t==null?void 0:t.discount},t.id))})}):s.jsx(S,{fontSize:"xl",children:"No products found"})})}),(e==null?void 0:e.pagination.total_items)>12&&s.jsx(W,{currentPage:((h=e==null?void 0:e.pagination)==null?void 0:h.current_page)??y,setCurrentPage:m,totalPages:((f=e==null?void 0:e.pagination)==null?void 0:f.total_pages)??2,sort:l})]})]})})}export{ts as default};
