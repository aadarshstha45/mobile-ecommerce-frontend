import{r as m,a as E,b as L,c as M,j as n,C as T,L as A,F as C,S as F,T as N,B as P,M as V,e as z,ag as D,x as W}from"./index-BFT1rXGf.js";import{b as _,c as $,I as O}from"./index-3feim9Gj.js";import{L as U}from"./index-CXQwK7-A.js";import{B as H}from"./index-CSN6non7.js";import{S as Q}from"./SelectInput-BcVhVj1a.js";import{s as q}from"./data-BjPZZWce.js";import"./index-Cy_psTXY.js";import"./GoogleIcon-Ct-eAVRw.js";import"./TextInput-Dtj-rTtW.js";import"./x-bHslIh_F.js";import"./chunk-H46NUPBZ-_guLRVhK.js";import"./auth-BurO7mF5.js";import"./zod-DiMJeo-2.js";import"./chunk-EC6XFFZH-D7ggePP4.js";import"./chunk-2EW3JUUD-l9JrK1nv.js";import"./chunk-YQO7BFFX-DsTOsh7F.js";import"./chunk-FHHZMTWR-n0CcMUIN.js";import"./shopping-bag-Twtn47yK.js";import"./chevron-right-vxOHCZCA.js";var R=new Map,w=new WeakMap,B=0,G=void 0;function J(e){return e?(w.has(e)||(B+=1,w.set(e,B.toString())),w.get(e)):"0"}function K(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?J(e.root):e[t]}`).toString()}function X(e){const t=K(e);let i=R.get(t);if(!i){const c=new Map;let u;const r=new IntersectionObserver(o=>{o.forEach(s=>{var a;const f=s.isIntersecting&&u.some(d=>s.intersectionRatio>=d);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=f),(a=c.get(s.target))==null||a.forEach(d=>{d(f,s)})})},e);u=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:r,elements:c},R.set(t,i)}return i}function Y(e,t,i={},c=G){if(typeof window.IntersectionObserver>"u"&&c!==void 0){const a=e.getBoundingClientRect();return t(c,{isIntersecting:c,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:u,observer:r,elements:o}=X(i),s=o.get(e)||[];return o.has(e)||o.set(e,s),s.push(t),r.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(o.delete(e),r.unobserve(e)),o.size===0&&(r.disconnect(),R.delete(u))}}function Z({threshold:e,delay:t,trackVisibility:i,rootMargin:c,root:u,triggerOnce:r,skip:o,initialInView:s,fallbackInView:a,onChange:f}={}){var d;const[l,j]=m.useState(null),v=m.useRef(),[b,p]=m.useState({inView:!!s,entry:void 0});v.current=f,m.useEffect(()=>{if(o||!l)return;let x;return x=Y(l,(I,y)=>{p({inView:I,entry:y}),v.current&&v.current(I,y),y.isIntersecting&&r&&x&&(x(),x=void 0)},{root:u,rootMargin:c,threshold:e,trackVisibility:i,delay:t},a),()=>{x&&x()}},[Array.isArray(e)?e.toString():e,l,u,c,r,o,i,a,t]);const S=(d=b.entry)==null?void 0:d.target,g=m.useRef();!l&&S&&!r&&!o&&g.current!==S&&(g.current=S,p({inView:!!s,entry:void 0}));const h=[j,b.inView,b.entry];return h.ref=h[0],h.inView=h[1],h.entry=h[2],h}const ve=()=>{const{ref:e,inView:t}=Z(),[i,c]=m.useState(""),u=E(),[r]=L("(max-width: 540px)"),o=M(),s=new URLSearchParams(o.search),a=s.get("sort")||"",{data:f,fetchNextPage:d,isFetchingNextPage:l,hasNextPage:j,isPending:v}=_(i);m.useEffect(()=>{c(a)},[a]),m.useEffect(()=>{t&&j&&!l&&d()},[t,j,l]);const b=p=>{c(p.value),p.value!==""&&(s.set("sort",p.value),u(`?${s.toString()}`))};return n.jsx(T,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw",lg:"80vw"},py:10,children:v?n.jsx(A,{}):n.jsxs(C,{flexDir:"column",gap:4,children:[n.jsxs(C,{gap:4,flexDir:r?"column":"row",justify:r?"center":"space-between",align:r?"start":"space-between",children:[n.jsxs(F,{gap:2,children:[n.jsx(N,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,children:"Shop Now"}),n.jsx(H,{})]}),n.jsx(Q,{isControlled:!1,value:i,placeholder:"Sort by",name:"sort",handleChange:b,options:q})]}),f==null?void 0:f.pages.map((p,S)=>n.jsx(P,{children:n.jsx(V,{columnsCountBreakPoints:$,children:n.jsx(z,{gutter:r?"10px":"20px",children:p.data.map(g=>n.jsx(O,{data:g,discountPercent:g==null?void 0:g.discount},g.id))})})},S)),n.jsx(P,{ref:e,h:"1px"}),n.jsx(D,{gap:4,py:10,align:"center",justify:"center",children:l&&n.jsx(W,{as:U,boxSize:20})})]})})};export{ve as default};
