import{n as Z,j as n,o as $,m as G,v as F,w as J,a0 as K,a1 as X,x as g,a3 as Y,R as ee,aM as ne,T as m,aN as ie,$ as se,aO as le,r as x,aP as te,aQ as oe,aR as re,V as ae,Q as M,F as ce,L as de,S as E,B as me,ag as f,aS as pe}from"./index-BFT1rXGf.js";import{S as ue,c as xe,P as he}from"./SelectInput-BcVhVj1a.js";import{a as h}from"./TextInput-Dtj-rTtW.js";import{M as ye,C as be}from"./Checkbox-QfV6uRcu.js";import{M as ge}from"./ModalForm-Buy9DjPN.js";import{C as je}from"./circle-plus-BnRiMRQB.js";import"./chunk-H46NUPBZ-_guLRVhK.js";import"./x-bHslIh_F.js";var N=l=>{const{className:t,...p}=l,o=Z();return n.jsx($.hr,{"aria-orientation":"horizontal",className:G("chakra-menu__divider",t),...p,__css:o.divider})};N.displayName="MenuDivider";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=F("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=F("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var fe=J({displayName:"EditIcon",path:n.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})});const Ce=({onView:l,onEdit:t,onDelete:p})=>{const o=[{id:1,icon:Se,color:"green.500",label:"View",onClick:l},{id:2,icon:fe,color:"blue.500",label:"Edit",onClick:t},{id:3,icon:ie,color:"red.500",label:"Delete",onClick:p}];return n.jsxs(K,{isLazy:!0,colorScheme:"primary",placement:"bottom-end",children:[n.jsx(X,{pos:"absolute",top:2,right:2,children:n.jsx(g,{as:_e,color:"primary.500",boxSize:4})}),n.jsx(Y,{border:"thin solid",textColor:"primary.500",mt:-2,py:0,overflow:"hidden",minW:"100px",children:o.map((a,u)=>n.jsxs(ee.Fragment,{children:[n.jsx(ne,{icon:n.jsx(g,{as:a.icon,color:a.color,boxSize:4}),onClick:a.onClick,py:1,children:n.jsx(m,{fontSize:{base:"14px",md:"16px"},children:a.label})}),n.jsx(N,{borderWidth:"thin",opacity:u!==o.length-1?1:0,my:0})]},u))})]})},Ee=()=>{const l=se(),{data:t,isPending:p}=le(),[o,a]=x.useState("Nepal"),[u,j]=x.useState("+977"),[c,d]=x.useState(null),C=te(),k=oe(c),A=re(),[_,y]=x.useState(null),[s,O]=x.useState(!1),{control:r,handleSubmit:P,formState:{errors:v},reset:b}=ae({defaultValues:{country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}});x.useEffect(()=>{var e,z;if(c){const i=t==null?void 0:t.find(U=>U.id===c);y(i),j(i==null?void 0:i.country_code),b({country:i==null?void 0:i.country,city:i==null?void 0:i.city,street:i==null?void 0:i.street,landmark:i==null?void 0:i.landmark,recipient_name:(z=(e=l==null?void 0:l.shipping_details)==null?void 0:e[0])!=null&&z.is_billing_address?l==null?void 0:l.name:(i==null?void 0:i.recipient_name)??"",phone_number:i==null?void 0:i.phone_number,is_billing_address:i==null?void 0:i.is_billing_address})}},[c,t,b,l]);const{isOpen:V,onOpen:S,onClose:w}=M(),{isOpen:L,onOpen:I,onClose:R}=M(),T=async e=>{_?(await k.mutateAsync({...e,country:o,country_code:u}),d(null),y(null)):await C.mutateAsync({...e,country:o,country_code:u}),w(),b({country:"",city:"",address:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1})},q=e=>{O(!0),e&&(d(e),S())},D=e=>{e&&(d(e),S())},H=()=>{d(null),y(null),S()},B=()=>{d(null),y(null),b({country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}),O(!1),w()},W=e=>{e&&(d(e),I())},Q=async()=>{c&&(await A.mutateAsync(c),R())};return n.jsxs(ce,{w:"full",flexDir:"column",gap:4,children:[n.jsx(m,{fontSize:"xl",children:"Saved Address"}),p?n.jsx(de,{height:window.innerHeight/2}):t?t.map(e=>n.jsxs(E,{gap:1,children:[n.jsxs(me,{py:8,bg:e.is_billing_address?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:e.is_billing_address?"2px solid":"1px solid",borderColor:"#939292",borderRadius:2,px:4,pos:"relative",mt:4,children:[n.jsxs(f,{spacing:4,align:"start",children:[n.jsx(g,{as:ye,color:"primary.500",boxSize:8}),n.jsxs(E,{spacing:2,children:[n.jsx(f,{spacing:4,children:n.jsxs(m,{fontSize:{base:"14px",md:"18px"},children:[e.address&&e.address+","," ",(e==null?void 0:e.street)&&(e==null?void 0:e.street)+","," ",e==null?void 0:e.city,",",e==null?void 0:e.country]})}),n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:e==null?void 0:e.landmark})]})]}),n.jsx(Ce,{onView:()=>q(e==null?void 0:e.id),onDelete:()=>W(e==null?void 0:e.id),onEdit:()=>D(e==null?void 0:e.id)})]},e.id),e.is_billing_address&&n.jsx(m,{fontStyle:"italic",fontSize:"sm",color:"#939292",children:"* This address is used for billing by default."})]},e.id)):n.jsx(n.Fragment,{children:n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})}),!p&&n.jsxs(f,{onClick:H,cursor:"pointer",color:"primary.500",mt:4,w:"fit-content",children:[n.jsx(g,{as:je,boxSize:6}),n.jsx(m,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),n.jsxs(ge,{form:"shipping-address-form",isOpen:V,onClose:B,heading:s?"View Address":_?"Edit Address":"Add New Address",buttonText:c?"Update":"Add",onSubmit:P(T),isLoading:_?k.isPending:C.isPending,isDisabled:s,isHidden:s,children:[n.jsx(ue,{width:"full",label:"Country",options:xe,name:"country",isControlled:!0,isRequired:!s,placeholder:"Select Country",control:r,defaultValue:o,handleChange:e=>{a(e.value),j(e.dial_code)},isReadOnly:s,errors:v}),n.jsx(h,{label:"City",control:r,isReadOnly:s,name:"city",isRequired:!s}),n.jsx(h,{label:"Address",control:r,isReadOnly:s,name:"address"}),n.jsx(h,{label:"Street",control:r,isReadOnly:s,name:"street"}),n.jsx(h,{label:"Landmark",control:r,isReadOnly:s,name:"landmark"}),n.jsx(h,{label:"Recipient Name",control:r,isReadOnly:s,name:"recipient_name",isRequired:!s}),n.jsx(he,{defaultValue:u,handleChange:e=>{a(e.name),j(e.value)},name:"phone_number",label:"Phone Number",control:r,isReadOnly:s,errors:v,isRequired:!s}),n.jsx(be,{control:r,isReadOnly:s,name:"is_billing_address",label:"Set as default billing address"})]}),n.jsx(pe,{heading:"Delete Address",message:"Are you sure you want to delete this address?",isOpen:L,isDeleting:A.isPending,onDelete:Q,onClose:()=>{R(),d(null)}})]})};export{Ee as default};
