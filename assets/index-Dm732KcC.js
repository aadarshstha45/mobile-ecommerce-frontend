import{b as L,c as M,d as T,e as R,r as o,f as U,j as e,C as H,F as i,S as J,T as C,g as O,M as W,h as q}from"./index-DDpgwTCU.js";import{B as I}from"./index-Y2QToRZ8.js";import{s as Q,C as $,a as A}from"./data-CRd6G4Nv.js";import{S as G}from"./SelectInput-DR2zaBpb.js";import{c as K,I as V}from"./index-BlMWsWzN.js";import{P as X}from"./PaginationButton-BgNijcjL.js";import"./chevron-right-C-0SP1LL.js";import"./chunk-H46NUPBZ-CRpuBU0g.js";import"./index-qKBf4HVR.js";import"./GoogleIcon-BI1_C2lC.js";import"./TextInput-CaAjj8tM.js";import"./x-8KuvsCtG.js";import"./auth-CN0ez-Q0.js";import"./zod-DAGFr_m9.js";import"./chunk-EC6XFFZH-b1jGtiIR.js";import"./chunk-6SZ7MXCX-DgDvPCCV.js";import"./index-BBYOmjQG.js";import"./chunk-2EW3JUUD-BCkOJRr-.js";import"./chunk-YQO7BFFX-DRcYam7V.js";import"./chunk-FHHZMTWR-BzTNK_wX.js";import"./shopping-bag-DgRaTVkD.js";function je(){var j,w,y;const{category_slug:x,slug:l}=L(),P=M(),[c]=T("(max-width: 540px)"),h=R(),b=h.pathname.split("/")[1].replace(/-/g," "),r=new URLSearchParams(h.search),p=Number(r.get("page"))||1,d=r.get("sort")||"",[v,f]=o.useState(1),[u,S]=o.useState("");if(!l)throw new Error("Slug is required");const F=x?{category_slug:x,slug:l}:l,[a,z]=o.useState([]),[g,B]=o.useState([]),{data:t,isPending:E,isFetching:_}=U(p,F,u,JSON.stringify(a),JSON.stringify(g));o.useEffect(()=>{f(p)},[p]),o.useEffect(()=>{S(d)},[d]);const k=s=>{S(s.value),s.value!==""&&(r.set("page","1"),r.set("sort",s.value),P(`?${r.toString()}`))},N=(s,n)=>{z(s.target.checked?[...a,n]:a.filter(m=>m!==n)),window.scroll({top:0,behavior:"smooth"})},D=(s,n)=>{B(s.target.checked?[...g,n]:g.filter(m=>m!==n)),window.scroll({top:0,behavior:"smooth"})};return o.useEffect(()=>{a.length>0},[a]),e.jsxs(H,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw"},py:10,children:[e.jsxs(i,{gap:4,flexDir:c?"column":"row",justify:c?"center":"space-between",align:c?"start":"space-between",children:[e.jsxs(J,{gap:2,children:[e.jsx(C,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,textTransform:"capitalize",children:b}),e.jsx(I,{})]}),e.jsx(G,{isControlled:!1,value:u,placeholder:"Sort by",name:"sort",handleChange:k,options:Q})]}),e.jsxs(i,{py:10,gap:4,children:[e.jsx(i,{w:{sm:"200px",md:"250px"},display:{base:"none",sm:"flex"},minH:window.innerHeight,children:e.jsxs(i,{flexDir:"column",gap:4,w:"full",children:[e.jsx($,{}),e.jsx(A,{handleSizeSelect:N,handleColorSelect:D})]})}),e.jsxs(i,{w:"full",flexDir:"column",gap:4,children:[E||_?e.jsx(O,{height:"500px"}):t&&((j=t.data)==null?void 0:j.length)>0?e.jsx(W,{columnsCountBreakPoints:K,children:e.jsx(q,{gutter:c?"10px":"20px",children:t==null?void 0:t.data.map(s=>e.jsx(V,{data:s,discountPercent:s==null?void 0:s.discount,colorOptions:(s==null?void 0:s.product_properties)&&s.product_properties},s.id))})}):e.jsx(C,{fontSize:"xl",children:"No products found"}),(t==null?void 0:t.pagination.total_items)>12&&e.jsx(X,{currentPage:((w=t==null?void 0:t.pagination)==null?void 0:w.current_page)??v,setCurrentPage:f,totalPages:((y=t==null?void 0:t.pagination)==null?void 0:y.total_pages)??2,sort:u})]})]})]})}export{je as default};
