import{j as e,L as T,F as f,a4 as R,I as v,T as x,V as z,r as w,ar as L,as as B,at as I,au as O,aH as k,av as A,aI as E,a2 as u,Q as H}from"./index-BFT1rXGf.js";import{a as V,b as _,c as N}from"./index-Cjgl6hW0.js";import{T as S,a as $,b as F,d as c,e as P,c as C,f as d}from"./chunk-MGVPL3OH-Cqi4dTyY.js";import"./SelectInput-BcVhVj1a.js";import{a as b}from"./TextInput-Dtj-rTtW.js";import{T as D,b as Q,c as q,d as G,e as y}from"./chunk-IAXSQ4X2-1Uw2cJUO.js";import"./chunk-H46NUPBZ-_guLRVhK.js";import"./x-bHslIh_F.js";const J=()=>{const{data:n,isPending:i}=V();return i?e.jsx(T,{}):n&&n.length>0?e.jsx(S,{children:e.jsxs($,{colorScheme:"primary",children:[e.jsxs(F,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{children:"Rating"}),e.jsx(c,{children:"Review"})]}),e.jsx(P,{children:n.map((s,t)=>{var l,r,o;return e.jsxs(C,{children:[e.jsx(d,{children:e.jsxs(f,{gap:4,as:R,to:s.subcategory?`/products/${(l=s.category)==null?void 0:l.slug}/${(r=s.subcategory)==null?void 0:r.slug}/${s.id}`:`/products/${(o=s.category)==null?void 0:o.slug}/${s.id}`,children:[e.jsx(v,{src:s.product.image,alt:s.product.name,boxSize:"100px",objectFit:"cover"}),e.jsx(x,{children:s.product.name})]})}),e.jsx(d,{children:s.rating}),e.jsx(d,{children:s.review})]},t)})})]})}):e.jsx(x,{children:"No reviews found"})},K=({onClose:n,isOpen:i,productId:s})=>{const{control:t,handleSubmit:l,setValue:r}=z({defaultValues:{product_id:s,rating:4,review:"Hello"}});w.useEffect(()=>{s!==null&&r("product_id",s)},[s,r]);const{mutateAsync:o,isPending:j}=_(),m=async a=>{await o(a),n()};return e.jsxs(L,{isOpen:i,onClose:n,motionPreset:"slideInTop",children:[e.jsx(B,{}),e.jsxs(I,{children:[e.jsx(O,{}),e.jsx(k,{children:"Add Review"}),e.jsx(A,{children:e.jsxs("form",{onSubmit:l(m),id:"review-form",children:[e.jsx(b,{control:t,name:"rating",label:"Rating"}),e.jsx(b,{type:"textarea",control:t,name:"review",label:"Review"})]})}),e.jsxs(E,{gap:1,children:[e.jsx(u,{size:"sm",colorScheme:"gray",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(u,{size:"sm",form:"review-form",type:"submit",isLoading:j,children:"Submit"})]})]})]})},U=()=>{const{data:n,isPending:i}=N(),[s,t]=w.useState(null),{isOpen:l,onOpen:r,onClose:o}=H(),j=a=>{t(a),r()},m=()=>{t(null),o()};return e.jsxs(e.Fragment,{children:[e.jsx(K,{onClose:m,isOpen:l,productId:s}),i?e.jsx(T,{}):n&&n.length>0?e.jsx(S,{children:e.jsxs($,{colorScheme:"primary",children:[e.jsxs(F,{children:[e.jsx(c,{children:"Product"}),e.jsx(c,{}),e.jsx(c,{children:"Review"})]}),e.jsx(P,{children:n.map((a,M)=>{var h,p,g;return e.jsxs(C,{children:[e.jsx(d,{children:e.jsxs(f,{gap:4,as:R,to:a.subcategory?`/products/${(h=a.category)==null?void 0:h.slug}/${(p=a.subcategory)==null?void 0:p.slug}/${a.id}`:`/products/${(g=a.category)==null?void 0:g.slug}/${a.id}`,children:[e.jsx(v,{src:a.image,alt:a.name,w:{base:"100px",md:"150px"},aspectRatio:1/1}),e.jsx(x,{fontSize:{base:"14px",md:"16px",lg:"18px"},children:a.name})]})}),e.jsx(d,{}),e.jsx(d,{children:e.jsx(u,{onClick:()=>j(a.id),variant:"outline",children:"Review"})})]},M)})})]})}):e.jsx(x,{children:"No orders left to be reviewed"})]})},W=[{name:"To Review"},{name:"Reviewed"}],te=()=>e.jsxs(D,{isLazy:!0,position:"relative",variant:"unstyled",children:[e.jsx(Q,{children:W.map((n,i)=>e.jsx(q,{_selected:{textColor:"white",bg:"primary.500",borderRadius:2},fontSize:{base:"sm",md:"md",xl:"lg"},children:n.name},i))}),e.jsxs(G,{mt:8,children:[e.jsx(y,{p:0,children:e.jsx(U,{})}),e.jsx(y,{p:0,children:e.jsx(J,{})})]})]});export{te as default};
