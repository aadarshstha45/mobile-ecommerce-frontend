import{az as P,n as k,k as v,j as s,F as n,C as B,I as C,B as L,Z as R,a0 as I,t as A,aA as E,aB as _,ac as f}from"./index-Yda58qFj.js";import{a as x}from"./TextInput-C9tdSzdn.js";import{o as z,s as g,t as F}from"./zod-gmS_9dNm.js";import{I as G}from"./ArrowLeft-BV0zSr8q.js";import{u as T}from"./index.esm-ZK9cSZJR.js";import{C as H}from"./chunk-YQO7BFFX-VxzdDLuY.js";import{S as U,G as w}from"./chunk-ZPFGWTBB-2m0Xe1Ix.js";import{H as W}from"./chunk-7OLJDQMT-C7tiIYGe.js";import"./X-DI5PdmoX.js";import"./chunk-H46NUPBZ-BnaCg10E.js";const q="/assets/PasswordBanner-CbiDWfUS.png",D=z({password:g().min(8,{message:"Password must be at least 8 characters long"}),password_confirmation:g().min(8,{message:"Password must be at least 8 characters long"})}).refine(r=>r.password===r.password_confirmation,{message:"Passwords did not match",path:["confirm_password"]}),V={password:"",password_confirmation:""};function ss(){var d,p;const{mutateAsync:r,isPending:b,error:t}=P({mutationKey:["forgot-password"],mutationFn:async e=>await E.post(`${_}reset-password`,e),onError:e=>{var o;const a=(o=e==null?void 0:e.response)==null?void 0:o.data.errors;Array.isArray(a)||f.error(a)}}),i=(p=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:p.errors,h=k(),c=new URLSearchParams(h.search),j=v(),{control:m,formState:{errors:l},handleSubmit:y}=T({defaultValues:V,resolver:F(D)}),S=async e=>{const a=c.get("token"),o=c.get("email");if(!a||!o)return;const u=await r({...e,email:o,token:a});console.log(u),u.status===200&&(f.success("Password reset successful. Login to continue"),setTimeout(()=>{j("/login")},2e3))};return s.jsx(n,{bg:{base:"#f2f2f2",md:""},minH:"100vh",maxW:"100vw",align:"center",justify:"center",children:s.jsx(B,{maxW:{base:"98vw",lg:"90vw",xl:"85vw"},py:10,children:s.jsx(H,{shadow:"none",children:s.jsxs(U,{columns:{base:1,md:2},spacing:6,children:[s.jsx(w,{display:{base:"none",md:"block"},colSpan:1,bg:"white",justifySelf:{md:"start",xl:"center"},alignContent:"center",children:s.jsx(C,{src:q,alt:"Login Banner",fallback:s.jsx(L,{bg:"gray.100",w:"100%",h:"100%"})})}),s.jsx(w,{w:{base:"90%",lg:"80%"},justifySelf:"center",alignSelf:"center",colSpan:1,children:s.jsx("form",{onSubmit:y(S),noValidate:!0,children:s.jsxs(n,{p:{base:4,sm:"40px 10px"},flexDir:"column",justify:"center",align:"center",children:[s.jsx(W,{fontSize:{base:"16px",sm:"18px",md:"20px",lg:"22px",xl:"24px"},textAlign:"center",mb:8,children:"Reset Password"}),s.jsx(x,{errors:l,type:"password",label:"Password",name:"password",control:m,backErrors:i,isRequired:!0}),s.jsx(x,{errors:l,type:"password",label:"Confirm Password",name:"password_confirmation",control:m,backErrors:i,isRequired:!0}),s.jsx(R,{type:"submit",colorScheme:"primary",w:"100%",size:{base:"sm",md:"md"},isLoading:b,children:"Reset Password"}),s.jsxs(n,{gap:2,mt:6,align:"center",as:I,to:"/login",children:[s.jsx(A,{as:G,boxSize:6}),"Go back"]})]})})})]})})})})}export{ss as default};
