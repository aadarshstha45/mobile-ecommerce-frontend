import{w as k,r as w,aW as F,W as S,j as e,aV as R,b6 as v,U as A,F as j,O as P,T as a,K as z,B as I,y as f,at as c,S as D,a3 as y,aG as O}from"./index-BISsgrs9.js";import{P as N}from"./PhoneInput-DPhXZ9HV.js";import{S as M,c as q,C as L}from"./SelectInput-DgrB4gdK.js";import{T as d}from"./TextInput-BhA_o2nr.js";import{C as T,M as V}from"./Checkbox-BkHiX4-Z.js";import{M as B}from"./ModalForm-CorGXDFJ.js";import{C as E}from"./circle-plus-B27cN5_8.js";import{R as G,a as W}from"./chunk-RDF2AYID-BnZddBLH.js";import{F as H}from"./chunk-H46NUPBZ-Dd1bnTT1.js";import"./index.esm-jS8sanS8.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=k("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),U=({isOpen:l,onClose:t})=>{const[m,p]=w.useState("+977"),o=F(),{control:s,handleSubmit:u,formState:{errors:x}}=S({defaultValues:{country:"",city:"",street:"",landmark:"",recipient_name:"",phone_number:"",is_billing_address:!1}}),h=async n=>{await o.mutateAsync({...n,country_code:m}),t()};return e.jsxs(B,{form:"shipping-address-form",isOpen:l,onClose:t,heading:"Add Address",onSubmit:u(h),isLoading:o.isPending,isDisabled:o.isPending,children:[e.jsx(M,{width:"full",label:"Country",options:q,name:"country",isControlled:!0,isRequired:!0,placeholder:"Select Country",control:s}),e.jsx(d,{label:"City",control:s,name:"city",isRequired:!0}),e.jsx(d,{label:"Street",control:s,name:"street"}),e.jsx(d,{label:"Landmark",control:s,name:"landmark"}),e.jsx(d,{label:"Recipient Name",control:s,name:"recipient_name",isRequired:!0}),e.jsx(N,{defaultValue:L,handleChange:n=>{p(n.value)},name:"phone_number",label:"Phone Number",control:s,errors:x,isRequired:!0}),e.jsx(T,{control:s,name:"is_billing_address",label:"Set as default billing address"})]})},te=({stepProps:l})=>{const{data:t,isRefetching:m}=R(),{stepData:p,setStepData:o}=v(),{isOpen:s,onOpen:u,onClose:x}=A(),{control:h,handleSubmit:n}=S({defaultValues:{delivery_address_id:""}}),g=r=>{if(!r.delivery_address_id){O.error("Please select a delivery address");return}o({...p,delivery_address_id:r.delivery_address_id}),l.nextStep()},C=()=>{l.prevStep()};return e.jsxs(j,{flexDir:"column",gap:4,children:[e.jsxs("form",{id:"shipping-details-form",onSubmit:n(g),children:[e.jsx(P,{name:"delivery_address_id",control:h,render:({field:{value:r,onChange:_}})=>e.jsx(G,{value:r,onChange:_,children:e.jsxs(j,{w:"full",flexDir:"column",gap:4,children:[e.jsx(a,{fontSize:"xl",children:"Select Delivery Address"}),m?e.jsx("div",{className:"loader"}):t&&t.length>0?t.map((i,b)=>e.jsxs(z,{children:[e.jsxs(H,{bg:parseInt(r)===i.id?"#f5f5f5":"",w:{base:"full",lg:"60%"},border:parseInt(r)===i.id?"2px solid":"1px solid",borderRadius:2,p:4,pos:"relative",borderColor:parseInt(r)===i.id?"green":"#000",htmlFor:i.id,children:[e.jsx(I,{bg:"green",w:4,h:4,pos:"absolute",top:2,right:2,display:parseInt(r)===i.id?"block":"none",overflow:"hidden",children:e.jsx(f,{as:K,color:"white",boxSize:4})}),e.jsxs(c,{spacing:4,align:"start",children:[e.jsx(f,{as:V,color:"primary.500",boxSize:8}),e.jsxs(D,{spacing:2,children:[e.jsx(c,{spacing:4,children:e.jsxs(a,{fontSize:{base:"14px",md:"18px"},children:[i==null?void 0:i.street,", ",i==null?void 0:i.city,","," ",i==null?void 0:i.country]})}),e.jsx(a,{fontSize:{base:"14px",md:"18px"},children:i==null?void 0:i.landmark})]})]})]}),e.jsx(W,{isChecked:r===i.id,id:i.id,value:i.id,display:"none"},b)]},b)):e.jsx(a,{pb:4,fontSize:{base:"14px",md:"18px"},children:"No address saved yet"})]})})}),e.jsxs(c,{onClick:u,cursor:"pointer",color:"primary.500",w:"fit-content",children:[e.jsx(f,{as:E,boxSize:6}),e.jsx(a,{fontSize:{base:"14px",md:"18px"},children:"Add New Address"})]}),e.jsxs(c,{mt:6,justify:"space-between",children:[e.jsx(y,{colorScheme:"primary",w:"fit-content",borderRadius:"2px",onClick:C,size:"sm",children:"Previous"}),e.jsx(y,{colorScheme:"primary",w:"fit-content",borderRadius:"2PX",size:"sm",type:"submit",form:"shipping-details-form",children:"Next"})]})]}),e.jsx(U,{isOpen:s,onClose:x})]})};export{te as default};
