import{W as N,r as d,b4 as T,q as U,j as e,F as p,T as I,B as V,P as H,Q as L,s as X,t as Y,Z as x,H as M}from"./index-Yda58qFj.js";import{R as Q,c as W}from"./DatePicker-CvcczAvj.js";import{P as Z,S as $,c as J}from"./SelectInput-1jxHcoUW.js";import{u as K}from"./index.esm-ZK9cSZJR.js";import{a as c}from"./TextInput-C9tdSzdn.js";import{P as ee,I as se}from"./ProfileImage-BkeiI7p5.js";import{P as ne}from"./profile-D807lflu.js";import{t as re}from"./zod-gmS_9dNm.js";import{S as D,G as o}from"./chunk-ZPFGWTBB-2m0Xe1Ix.js";import"./X-DI5PdmoX.js";import"./chunk-H46NUPBZ-BnaCg10E.js";import"./index-CencVihT.js";import"./chunk-IAXSQ4X2-DhnKQl5Z.js";const ye=()=>{var b,j,g,S;const s=N(),[n,m]=d.useState(!0),{mutateAsync:E,isPending:v,error:u,isError:B}=T(),{onOpen:q,isOpen:z,onClose:A}=U(),{control:a,reset:h,handleSubmit:F,formState:{errors:i}}=K({defaultValues:{name:"",email:"",phone_number:"",country:"",city:"",street:"",landmark:"",country_code:"",dob:""},resolver:re(ne)}),[f,y]=d.useState((j=(b=s==null?void 0:s.shipping_details)==null?void 0:b[0])==null?void 0:j.country_code);if(d.useEffect(()=>{var l,t;const r=(t=(l=s==null?void 0:s.shipping_details)==null?void 0:l[0])==null?void 0:t.country_code;r&&y(r)},[s]),B){const r=(S=(g=u==null?void 0:u.response)==null?void 0:g.data)==null?void 0:S.errors;console.log(r)}d.useEffect(()=>{var r,l,t,R,_,C,O,P,k,w;s&&h({name:s.name??"",email:s.email??"",phone_number:((l=(r=s.shipping_details)==null?void 0:r[0])==null?void 0:l.phone_number)??"",dob:s.dob??"",country:((R=(t=s.shipping_details)==null?void 0:t[0])==null?void 0:R.country)??"",city:((C=(_=s.shipping_details)==null?void 0:_[0])==null?void 0:C.city)??"",street:((P=(O=s.shipping_details)==null?void 0:O[0])==null?void 0:P.street)??"",landmark:((w=(k=s.shipping_details)==null?void 0:k[0])==null?void 0:w.landmark)??""})},[s,h]);const G=async r=>{await E({...r,country_code:f,dob:W(r.dob)}),m(!0)};return e.jsxs(p,{as:"form",onSubmit:F(G),w:"full",flexDir:"column",gap:8,noValidate:!0,children:[e.jsx(ee,{data:s,isOpen:z,onClose:A}),e.jsxs(p,{flexDir:"column",gap:4,children:[e.jsx(I,{fontSize:"xl",children:"Profile Details"}),e.jsxs(V,{display:{base:"flex",md:"none"},pos:"relative",w:"fit-content",borderRadius:50,children:[e.jsx(H,{src:s!=null&&s.image?`${s==null?void 0:s.image}`:L,size:"xl",loading:"lazy"}),e.jsx(X,{colorScheme:"primary",borderRadius:50,"aria-label":"Change Profile Picture",icon:e.jsx(Y,{as:se}),pos:"absolute",onClick:q,bottom:-2,right:-2})]}),e.jsxs(D,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(o,{colSpan:1,children:e.jsx(c,{isReadOnly:n,isRequired:!n,name:"name",label:"Full Name",control:a,errors:i})}),e.jsx(o,{colSpan:1,children:e.jsx(c,{isReadOnly:!0,name:"email",label:"Email",message:" * Email cannot be changed.",control:a,errors:i})}),e.jsx(o,{colSpan:1,children:e.jsx(Z,{defaultValue:f,handleChange:r=>{y(r.value)},name:"phone_number",label:"Phone Number",control:a,errors:i,isRequired:!n,isReadOnly:n})}),e.jsx(o,{colSpan:1,children:e.jsx(Q,{isReadOnly:n,name:"dob",label:"Birthday (Optional)",control:a,errors:i})})]})]}),e.jsxs(p,{w:"full",flexDir:"column",gap:4,children:[e.jsx(I,{fontSize:"xl",children:"Billing Address"}),e.jsxs(D,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(o,{colSpan:1,children:e.jsx($,{width:"full",label:"Country",options:J,name:"country",isControlled:!0,isRequired:!n,placeholder:"Select Country",control:a,isReadOnly:n,errors:i})}),e.jsx(o,{colSpan:1,children:e.jsx(c,{isReadOnly:n,isRequired:!n,name:"city",label:"City",control:a,errors:i})}),e.jsx(o,{colSpan:1,children:e.jsx(c,{isReadOnly:n,name:"street",label:"Street",control:a,errors:i})}),e.jsx(o,{colSpan:1,children:e.jsx(c,{isReadOnly:n,name:"landmark",label:"Nearest Landmark",control:a,errors:i})})]})]}),n?e.jsx(x,{w:"fit-content",borderRadius:3,onClick:()=>m(!1),colorScheme:"primary",children:"Edit"}):e.jsxs(M,{w:"full",children:[e.jsx(x,{isLoading:v,borderRadius:3,type:"submit",colorScheme:"primary",children:"Update"}),e.jsx(x,{borderRadius:3,variant:"outline",onClick:()=>m(!0),colorScheme:"primary",children:"Cancel"})]})]})};export{ye as default};
