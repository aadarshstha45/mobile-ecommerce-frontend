import{Q as L,Y as N,r as d,b4 as U,q as G,ad as H,j as e,F as h,T as E,B as Y,U as M,V as X,s as Q,a0 as x,H as $}from"./index-B-OoyzKg.js";import{R as J,c as K}from"./convertDate-BGy9ed_5.js";import{P as W,S as Z,c as ee}from"./SelectInput-BqxxfBBP.js";import{a as m}from"./TextInput-nSHvCcm8.js";import{P as se}from"./ProfileImage-gp9H5ASd.js";import{o as ae,s as o,u as ne,d as ie,t as re}from"./zod-yjvWVzjI.js";import{S as w,G as l}from"./chunk-ZPFGWTBB-Dc26tEBz.js";import"./x-mzBjqfef.js";import"./chunk-H46NUPBZ-ChvkZC4W.js";import"./index-DUSs78Jw.js";import"./chunk-IAXSQ4X2-BKGVUNff.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=L("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),le=ae({name:o().min(1,{message:"Name is required"}),email:o().email({message:"Enter a valid email address"}).min(1,{message:"Email is required"}),phone_number:o().min(1,{message:"Phone number is required"}).min(8,{message:"Phone number should be atleast 8 digits"}).max(14,{message:"Phone number should not be 14 digits"}),dob:ne([ie(),o()]).optional(),country:o().min(1,{message:"Country is required"}),city:o().min(1,{message:"City is required"}),street:o().optional(),landmark:o().optional()}),fe=()=>{var f,j,S,R;const s=N(),[a,u]=d.useState(!0),{mutateAsync:D,isPending:I,error:p,isError:T}=U(),{onOpen:B,isOpen:z,onClose:V}=G(),{control:i,reset:y,handleSubmit:A,formState:{errors:r}}=H({defaultValues:{name:"",email:"",phone_number:"",country:"",city:"",street:"",landmark:"",country_code:"",dob:""},resolver:re(le)}),[b,g]=d.useState((j=(f=s==null?void 0:s.shipping_details)==null?void 0:f[0])==null?void 0:j.country_code);if(d.useEffect(()=>{var t,c;const n=(c=(t=s==null?void 0:s.shipping_details)==null?void 0:t[0])==null?void 0:c.country_code;n&&g(n)},[s]),T){const n=(R=(S=p==null?void 0:p.response)==null?void 0:S.data)==null?void 0:R.errors;console.log(n)}d.useEffect(()=>{var n,t,c,C,_,O,P,k,q,v;s&&y({name:s.name??"",email:s.email??"",phone_number:((t=(n=s.shipping_details)==null?void 0:n[0])==null?void 0:t.phone_number)??"",dob:s.dob??"",country:((C=(c=s.shipping_details)==null?void 0:c[0])==null?void 0:C.country)??"",city:((O=(_=s.shipping_details)==null?void 0:_[0])==null?void 0:O.city)??"",street:((k=(P=s.shipping_details)==null?void 0:P[0])==null?void 0:k.street)??"",landmark:((v=(q=s.shipping_details)==null?void 0:q[0])==null?void 0:v.landmark)??""})},[s,y]);const F=async n=>{await D({...n,country_code:b,dob:K(n.dob)}),u(!0)};return e.jsxs(h,{as:"form",onSubmit:A(F),w:"full",flexDir:"column",gap:8,noValidate:!0,children:[e.jsx(se,{data:s,isOpen:z,onClose:V}),e.jsxs(h,{flexDir:"column",gap:4,children:[e.jsx(E,{fontSize:"xl",children:"Profile Details"}),e.jsxs(Y,{display:{base:"flex",md:"none"},pos:"relative",w:"fit-content",borderRadius:50,children:[e.jsx(M,{src:s!=null&&s.image?`${s==null?void 0:s.image}`:X,size:"xl",loading:"lazy"}),e.jsx(Q,{colorScheme:"primary",borderRadius:50,"aria-label":"Change Profile Picture",icon:e.jsx(oe,{}),pos:"absolute",onClick:B,bottom:-2,right:-2})]}),e.jsxs(w,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(l,{colSpan:1,children:e.jsx(m,{isReadOnly:a,isRequired:!a,name:"name",label:"Full Name",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(m,{isReadOnly:!0,name:"email",label:"Email",message:" * Email cannot be changed.",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(W,{defaultValue:b,handleChange:n=>{g(n.value)},name:"phone_number",label:"Phone Number",control:i,errors:r,isRequired:!a,isReadOnly:a})}),e.jsx(l,{colSpan:1,children:e.jsx(J,{isReadOnly:a,name:"dob",label:"Birthday (Optional)",control:i,errors:r})})]})]}),e.jsxs(h,{w:"full",flexDir:"column",gap:4,children:[e.jsx(E,{fontSize:"xl",children:"Billing Address"}),e.jsxs(w,{w:"full",columns:{base:1,md:2},spacingX:10,spacingY:4,children:[e.jsx(l,{colSpan:1,children:e.jsx(Z,{width:"full",label:"Country",options:ee,name:"country",isControlled:!0,isRequired:!a,placeholder:"Select Country",control:i,isReadOnly:a,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(m,{isReadOnly:a,isRequired:!a,name:"city",label:"City",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(m,{isReadOnly:a,name:"street",label:"Street",control:i,errors:r})}),e.jsx(l,{colSpan:1,children:e.jsx(m,{isReadOnly:a,name:"landmark",label:"Nearest Landmark",control:i,errors:r})})]})]}),a?e.jsx(x,{w:"fit-content",borderRadius:3,onClick:()=>u(!1),colorScheme:"primary",children:"Edit"}):e.jsxs($,{w:"full",children:[e.jsx(x,{isLoading:I,borderRadius:3,type:"submit",colorScheme:"primary",children:"Update"}),e.jsx(x,{borderRadius:3,variant:"outline",onClick:()=>u(!0),colorScheme:"primary",children:"Cancel"})]})]})};export{fe as default};
