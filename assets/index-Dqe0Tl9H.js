import{u as F,a as B,b as E,c as L,r as o,d as D,j as s,C as M,L as j,F as n,S as N,T,M as _,e as k,N as I}from"./index-BISsgrs9.js";import{B as R}from"./index-BSK4lIZH.js";import{S as U}from"./SelectInput-DgrB4gdK.js";import{c as W,I as q}from"./index-BEJm5nrO.js";import{P as z}from"./PaginationButton-9M1MOSnH.js";import{s as Q}from"./data-9b5u404L.js";import"./chevron-right-BhlNWi0v.js";import"./chunk-H46NUPBZ-Dd1bnTT1.js";import"./index-CBbptXYq.js";import"./index-JOemfFmf.js";import"./chunk-2EW3JUUD-GeYbpzur.js";import"./chunk-YQO7BFFX-BdmQoEQL.js";import"./chunk-FHHZMTWR-C0QhNtdk.js";import"./shopping-bag-CglRzelM.js";function rs(){var x,h,d,f;const{category_slug:p,slug:i}=F(),w=B(),[a]=E("(max-width: 540px)"),S=L(),r=new URLSearchParams(S.search),c=Number(r.get("page"))||1,u=r.get("sort")||"newest",[P,g]=o.useState(1),[l,m]=o.useState("newest");if(!i)throw new Error("Slug is required");const y=p?{category_slug:p,slug:i}:i,{data:e,isPending:b,isFetching:v}=D(c,y,l);o.useEffect(()=>{window.scrollTo(0,0),g(c)},[c]),o.useEffect(()=>{m(u)},[u]);const C=t=>{m(t.value),t.value!==""&&(r.set("page","1"),r.set("sort",t.value),w(`?${r.toString()}`))};return s.jsx(M,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw",lg:"80vw"},py:10,children:b?s.jsx(j,{}):s.jsxs(s.Fragment,{children:[s.jsxs(n,{gap:4,flexDir:a?"column":"row",justify:a?"center":"space-between",align:a?"start":"space-between",children:[s.jsxs(N,{gap:2,children:[s.jsx(T,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,children:(x=e==null?void 0:e.breadcrumbs)==null?void 0:x.category.name}),s.jsx(R,{})]}),s.jsx(U,{isControlled:!1,value:l,placeholder:"Sort by",name:"sort",handleChange:C,options:Q})]}),s.jsxs(n,{mt:-6,flexDir:"column",gap:4,children:[s.jsx(n,{gap:4,mt:12,children:s.jsx(n,{flexDir:"column",w:{base:"full"},children:v?s.jsx(j,{}):e&&((h=e.data)==null?void 0:h.length)>0?s.jsx(_,{columnsCountBreakPoints:W,children:s.jsx(k,{gutter:a?"10px":"20px",children:e==null?void 0:e.data.map(t=>s.jsx(q,{data:t,discountPercent:t==null?void 0:t.discount},t.id))})}):s.jsx(I,{to:"/"})})}),(e==null?void 0:e.pagination.total_items)>12&&s.jsx(z,{currentPage:((d=e==null?void 0:e.pagination)==null?void 0:d.current_page)??P,setCurrentPage:g,totalPages:((f=e==null?void 0:e.pagination)==null?void 0:f.total_pages)??2,sort:l})]})]})})}export{rs as default};
