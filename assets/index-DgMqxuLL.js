import{bq as ve,aS as je,aT as Ce,r as n,aR as J,m as Se,aD as N,aY as K,h as z,a_ as ke,f as De,aE as Ee,o as Fe,g as Ie,br as Re,j as t,bs as Te,bt as Oe,bu as ze,bv as ae,bw as Ae,bx as _e,by as Le,u as X,aa as We,b4 as Ne,aq as $e,ah as Be,ai as Me,aj as qe,aG as Ve,al as He,H as k,ar as Qe,T as A,W as ce,a2 as ee,a0 as U,B as $,ae as Ge,as as Ke,q as Ye,ac as le,S as ue,F as G,R as de,aK as Xe,an as Je,I as Ue}from"./index-BNQbqLJ6.js";import{a as Ze,u as et,b as tt}from"./index-ehVOIXUU.js";import{A as st,G as rt}from"./GoogleIcon-DdXlmzSC.js";import{u as ot}from"./index.esm-D5C9cM5f.js";import"./SelectInput-DU-wOcGY.js";import{a as pe}from"./TextInput-DSHK3BCb.js";import{L as nt}from"./auth-DI4cj_il.js";import{A as it,L as at}from"./chunk-EC6XFFZH-BrB59Nma.js";import{t as ct}from"./zod-CjCrpuHD.js";import{S as lt}from"./chunk-6SZ7MXCX-Dl3bF4np.js";import{a as ut}from"./index-rxtpR4b9.js";import{C as dt}from"./chunk-2EW3JUUD-CbvxBdAw.js";import{C as pt}from"./chunk-FHHZMTWR-Bonp7GVh.js";import{C as ht}from"./chunk-YQO7BFFX-Buw4xE8D.js";import{S as ft}from"./shopping-bag-Dp0hnnXs.js";function gt(e){const s=e.ownerDocument.defaultView||window,{overflow:r,overflowX:o,overflowY:a}=s.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(r+a+o)}function mt(e){return e.localName==="html"?e:e.assignedSlot||e.parentElement||e.ownerDocument.documentElement}function he(e){return["html","body","#document"].includes(e.localName)?e.ownerDocument.body:ve(e)&&gt(e)?e:he(mt(e))}var xt={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},te=e=>{var s;return((s=e.current)==null?void 0:s.ownerDocument)||document},Y=e=>{var s,r;return((r=(s=e.current)==null?void 0:s.ownerDocument)==null?void 0:r.defaultView)||window};function bt(e={}){const{openDelay:s=0,closeDelay:r=0,closeOnClick:o=!0,closeOnMouseDown:a,closeOnScroll:p,closeOnPointerDown:h=a,closeOnEsc:c=!0,onOpen:d,onClose:m,placement:f,id:x,isOpen:P,defaultIsOpen:D,arrowSize:g=10,arrowShadowColor:b,arrowPadding:E,modifiers:F,isDisabled:y,gutter:v,offset:l,direction:L,...I}=e,{isOpen:u,onOpen:R,onClose:T}=je({isOpen:P,defaultIsOpen:D,onOpen:d,onClose:m}),{referenceRef:B,getPopperProps:j,getArrowInnerProps:fe,getArrowProps:ge}=Ce({enabled:u,placement:f,arrowPadding:E,modifiers:F,gutter:v,offset:l,direction:L}),me=n.useId(),M=`tooltip-${x??me}`,C=n.useRef(null),W=n.useRef(),O=n.useCallback(()=>{W.current&&(clearTimeout(W.current),W.current=void 0)},[]),q=n.useRef(),V=n.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=void 0)},[]),H=n.useCallback(()=>{V(),T()},[T,V]),re=wt(C,H),Q=n.useCallback(()=>{if(!y&&!W.current){u&&re();const i=Y(C);W.current=i.setTimeout(R,s)}},[re,y,u,R,s]),w=n.useCallback(()=>{O();const i=Y(C);q.current=i.setTimeout(H,r)},[r,H,O]),oe=n.useCallback(()=>{u&&o&&w()},[o,w,u]),ne=n.useCallback(()=>{u&&h&&w()},[h,w,u]),xe=n.useCallback(i=>{u&&i.key==="Escape"&&w()},[u,w]);J(()=>te(C),"keydown",c?xe:void 0),J(()=>{if(!p)return null;const i=C.current;if(!i)return null;const S=he(i);return S.localName==="body"?Y(C):S},"scroll",()=>{u&&p&&H()},{passive:!0,capture:!0}),n.useEffect(()=>{y&&(O(),u&&T())},[y,u,T,O]),n.useEffect(()=>()=>{O(),V()},[O,V]),J(()=>C.current,"pointerleave",w);const be=n.useCallback((i={},S=null)=>({...i,ref:Se(C,S,B),onPointerEnter:N(i.onPointerEnter,Pe=>{Pe.pointerType!=="touch"&&Q()}),onClick:N(i.onClick,oe),onPointerDown:N(i.onPointerDown,ne),onFocus:N(i.onFocus,Q),onBlur:N(i.onBlur,w),"aria-describedby":u?M:void 0}),[Q,w,ne,u,M,oe,B]),we=n.useCallback((i={},S=null)=>j({...i,style:{...i.style,[K.arrowSize.var]:g?`${g}px`:void 0,[K.arrowShadowColor.var]:b}},S),[j,g,b]),ye=n.useCallback((i={},S=null)=>{const ie={...i.style,position:"relative",transformOrigin:K.transformOrigin.varRef};return{ref:S,...I,...i,id:M,role:"tooltip",style:ie}},[I,M]);return{isOpen:u,show:Q,hide:w,getTriggerProps:be,getTooltipProps:ye,getTooltipPositionerProps:we,getArrowProps:ge,getArrowInnerProps:fe}}var Z="chakra-ui:close-tooltip";function wt(e,s){return n.useEffect(()=>{const r=te(e);return r.addEventListener(Z,s),()=>r.removeEventListener(Z,s)},[s,e]),()=>{const r=te(e),o=Y(e);r.dispatchEvent(new o.CustomEvent(Z))}}function yt(e,s=[]){const r=Object.assign({},e);for(const o of s)o in r&&delete r[o];return r}function Pt(e,s){const r={};for(const o of s)o in e&&(r[o]=e[o]);return r}var vt=z(ke.div),se=De((e,s)=>{var r,o;const a=Ee("Tooltip",e),p=Fe(e),h=Ie(),{children:c,label:d,shouldWrapChildren:m,"aria-label":f,hasArrow:x,bg:P,portalProps:D,background:g,backgroundColor:b,bgColor:E,motionProps:F,...y}=p,v=(o=(r=g??b)!=null?r:P)!=null?o:E;if(v){a.bg=v;const j=Re(h,"colors",v);a[K.arrowBg.var]=j}const l=bt({...y,direction:h.direction}),L=typeof c=="string"||m;let I;if(L)I=t.jsx(z.span,{display:"inline-block",tabIndex:0,...l.getTriggerProps(),children:c});else{const j=n.Children.only(c);I=n.cloneElement(j,l.getTriggerProps(j.props,j.ref))}const u=!!f,R=l.getTooltipProps({},s),T=u?yt(R,["role","id"]):R,B=Pt(R,["role","id"]);return d?t.jsxs(t.Fragment,{children:[I,t.jsx(Te,{children:l.isOpen&&t.jsx(Oe,{...D,children:t.jsx(z.div,{...l.getTooltipPositionerProps(),__css:{zIndex:a.zIndex,pointerEvents:"none"},children:t.jsxs(vt,{variants:xt,initial:"exit",animate:"enter",exit:"exit",...F,...T,__css:a,children:[d,u&&t.jsx(z.span,{srOnly:!0,...B,children:f}),x&&t.jsx(z.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:t.jsx(z.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:a.bg}})})]})})})})]}):t.jsx(t.Fragment,{children:c})});se.displayName="Tooltip";var jt=class extends ze{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,s){super.setOptions({...e,behavior:ae()},s)}getOptimisticResult(e){return e.behavior=ae(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,s){var g,b;const{state:r}=e,o=super.createResult(e,s),{isFetching:a,isRefetching:p,isError:h,isRefetchError:c}=o,d=(b=(g=r.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:b.direction,m=h&&d==="forward",f=a&&d==="forward",x=h&&d==="backward",P=a&&d==="backward";return{...o,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ae(s,r.data),hasPreviousPage:_e(s,r.data),isFetchNextPageError:m,isFetchingNextPage:f,isFetchPreviousPageError:x,isFetchingPreviousPage:P,isRefetchError:c&&!m&&!x,isRefetching:p&&!f&&!P}}};function Ct(e,s){return Le(e,jt)}const _={getProducts:({page:e,sort:s,sizes:r,colors:o})=>`shop?page=${e} ${s&&`&sort=${s}`} ${r&&`&sizes=${r}`} ${o&&`&colors=${o}`}`,getFaqs:e=>`get-faqs?product_id=${e}`,getProductById:e=>`get-product-details/${e}`,getRelatedProducts:e=>`get-related-products/${e}`,getProductsByCategory:e=>`get-products-by-category/${e}`,getProductsBySearch:e=>`search?search=${e}`,addViewAction:"/add-view-action"},St=({sort:e,page:s,sizes:r,colors:o})=>Ne.get(_.getProducts({sort:e,page:s,sizes:r,colors:o})),Ht=(e,s,r)=>Ct({queryKey:["products",{sort:e,sizes:s,colors:r}],queryFn:async({pageParam:o=1})=>(await St({page:o,sort:e,sizes:s,colors:r})).data,initialPageParam:1,getNextPageParam:(o,a)=>{var p;return((p=o==null?void 0:o.data)==null?void 0:p.length)===0?void 0:a.length+1},refetchOnWindowFocus:!1}),Qt=e=>X({apiEndPoint:_.getProductById(e)}),Gt=e=>X({apiEndPoint:_.getRelatedProducts(e)}),kt=()=>We({apiEndPoint:_.addViewAction}),Kt=e=>X({apiEndPoint:_.getFaqs(e)}),Yt=e=>X({apiEndPoint:_.getProductsBySearch(e)});function Dt({isOpen:e,onClose:s}){const{mutateAsync:r,isPending:o}=$e(),{control:a,formState:{errors:p},reset:h,handleSubmit:c}=ot({defaultValues:{email:"",password:""},resolver:ct(nt)}),d=async f=>{await r(f),h({email:"",password:""}),s(),h()},m=()=>{h({email:"",password:""}),s()};return t.jsxs(Be,{isOpen:e,onClose:m,motionPreset:"slideInTop",children:[t.jsx(Me,{}),t.jsxs(qe,{as:"form",onSubmit:c(d),children:[t.jsx(Ve,{textAlign:"center",children:"Login"}),t.jsxs(He,{py:6,children:[t.jsx(pe,{errors:p,label:"Email",name:"email",control:a,leftIcon:t.jsx(it,{}),isRequired:!0}),t.jsx(pe,{errors:p,label:"Password",name:"password",type:"password",control:a,leftIcon:t.jsx(at,{}),isRequired:!0}),t.jsxs(k,{justifyContent:"space-between",mt:4,flexWrap:"wrap",children:[t.jsx(Qe,{colorScheme:"primary",size:{base:"sm",md:"md"},children:t.jsx(A,{fontSize:{base:"14px",sm:"16px"},children:"Remember me"})}),t.jsx(ce,{as:ee,size:"lg",to:"/reset-password",color:"primary.500",mt:2,fontSize:{base:"14px",sm:"16px"},children:"Forgot Password?"})]}),t.jsx(U,{type:"submit",colorScheme:"primary",w:"100%",mt:8,size:{base:"sm",md:"md"},isLoading:o,children:"Log In"}),t.jsx(ce,{as:ee,to:"/register",color:"primary.500",mt:4,fontSize:{base:"14px",sm:"16px"},textAlign:"center",children:"Don't have an account? Register"}),t.jsxs($,{pos:"relative",w:"100%",my:10,children:[t.jsx(Ge,{borderColor:"black",opacity:1,w:"full"}),t.jsx(st,{fontSize:"12px",px:4,bg:"white",children:"OR continue with"})]}),t.jsxs(k,{align:"center",justify:"center",flexWrap:"wrap",spacing:4,children:[t.jsx(U,{colorScheme:"primary",variant:"outline",size:{base:"sm",md:"md"},leftIcon:t.jsx(rt,{boxSize:6}),children:"Google"}),t.jsx(U,{colorScheme:"facebook",variant:"outline",size:{base:"sm",md:"md"},leftIcon:t.jsx(Ke,{boxSize:6}),children:"Facebook"})]})]})]})]})}const Et="/assets/NoPicture-C_lL-0bt.png",Xt={0:1,350:2,850:3,1300:4},Jt=({data:e,colorOptions:s,discountPercent:r,imageWidth:o})=>{var b,E,F,y,v;const{isOpen:a,onOpen:p,onClose:h}=Ye(),{data:c}=Ze({enabled:le.isAuthenticated()}),[d,m]=n.useState(!1),f=et(),x=tt(),P=kt(),D=async l=>{le.isAuthenticated()?d?await x.mutateAsync(l):await f.mutateAsync({product_id:l}):p()};n.useEffect(()=>{c!=null&&c.data&&(c==null?void 0:c.data.length)>0&&m(c.data.some(l=>l.id===e.id))},[c,e.id]);const g=async l=>{await P.mutateAsync({product_id:l})};return e?t.jsxs(t.Fragment,{children:[t.jsx(Dt,{isOpen:a,onClose:h}),e&&t.jsx(ee,{onClick:()=>g(e.id),to:e!=null&&e.subcategory?`/product/${(b=e==null?void 0:e.category)==null?void 0:b.slug}/${e==null?void 0:e.subcategory.slug}/${e.id}`:`/product/${(E=e==null?void 0:e.category)==null?void 0:E.slug}/${e.id}`,children:t.jsxs(ht,{overflow:"hidden",h:"auto",w:"full",shadow:"none",borderRadius:0,role:"group",children:[t.jsxs(dt,{pos:"relative",overflow:"hidden",border:"1px solid #D2CFCF",p:0,children:[t.jsxs(ue,{opacity:{base:0,md:1},zIndex:8,gap:2,pos:"absolute",right:4,top:4,children:[t.jsx(se,{bg:"primary.500",label:"Cart",fontSize:"12px",children:t.jsx(G,{border:"1px solid #D2CFCF",borderRadius:"50%",bg:"#D9D9D9",_hover:{bg:"#C6C6C6"},justify:"center",align:"center",p:2,children:t.jsx(de,{as:ft})})}),t.jsx(se,{bg:"primary.500",label:"WishList",fontSize:"12px",children:t.jsx(G,{border:"1px solid #D2CFCF",borderRadius:"50%",bg:"#D9D9D9",_hover:{bg:"#C6C6C6"},justify:"center",align:"center",p:2,onClick:l=>{l.preventDefault(),D(e.id)},children:f.isPending||x.isPending?t.jsx(Xe,{size:"xs"}):t.jsx(de,{as:Je,fill:d?"red.500":"",textColor:d?"red.500":""})})})]}),e.image?t.jsx($,{_groupHover:{transition:"0.3s",transform:"scale(1.1)",zIndex:-1},children:t.jsx(ut,{id:e.id,src:e.image,alt:e.id.toString(),w:o??"full"})}):t.jsx(G,{w:"full",h:"full",p:"20%",bg:"#D9D9D9",children:t.jsx(Ue,{w:"full",aspectRatio:1/1,src:Et,alt:"No Picture",objectFit:"cover"})}),t.jsxs(G,{pos:"absolute",top:4,left:4,flexDir:"column",w:"fit-content",textColor:"white",gap:2,children:[(e==null?void 0:e.is_new)&&t.jsx($,{w:"fit-content",px:2,py:.5,bg:"primary.500",fontSize:"14px",children:"New"}),r>0&&t.jsxs($,{w:"fit-content",px:2,py:.5,bg:"red.400",fontSize:"14px",children:[r," %"]})]})]}),t.jsxs(pt,{px:0,children:[t.jsx(A,{fontSize:"12px",fontWeight:600,textColor:"#939292",children:(F=e.category)==null?void 0:F.name}),t.jsx(ue,{mb:2,children:t.jsx(A,{noOfLines:1,fontSize:{base:"14px",sm:"16px",lg:"18px"},fontWeight:500,children:e.name})}),t.jsx(k,{justify:"space-between",children:t.jsxs(k,{justifySelf:s?"flex-end":"flex-start",spacing:"2px",children:[t.jsx(lt,{boxSize:3,color:"#FFC700"}),t.jsxs(A,{fontSize:"12px",fontWeight:500,textColor:"#939292",children:[(y=e.rating)==null?void 0:y.average," (",(v=e.rating)==null?void 0:v.total,")"]})]})}),t.jsxs(k,{justify:"space-between",mt:2,children:[s&&t.jsx(k,{spacing:"4px",flexWrap:"wrap",children:s==null?void 0:s.map((l,L)=>t.jsx($,{aspectRatio:1,w:"14px",borderRadius:"50%",bg:l.color.hex_value},L))}),t.jsxs(k,{gap:2,children:[r&&t.jsxs(A,{fontSize:{base:"12px",sm:"14px",lg:"16px"},fontWeight:500,children:["Rs.",e.price*(1-r/100)]}),t.jsxs(A,{fontSize:r?{base:"10px",sm:"12px",lg:"14px"}:{base:"12px",sm:"14px",lg:"16px"},textColor:r?"#939292":"",textDecoration:r?"line-through":"none",fontWeight:r?400:500,children:["Rs. ",e.price]})]})]})]})]})})]}):null};export{Jt as I,Dt as M,se as T,Gt as a,Qt as b,Xt as c,Ht as d,Yt as e,Kt as u};
