import{r as d,k as N,l as A,n as V,q as _,j as s,C as k,F,S as H,T as U,s as W,L as $,B as z,M as J,t as q,H as Q,U as G}from"./index-CrfEGL8u.js";import{d as K,c as X,I as Y}from"./index-DnYPDRjz.js";import{L as Z}from"./index-DrI8CFNZ.js";import{B as ee}from"./index-CcjFcDDT.js";import{s as se,F as te,C as E,a as L,S as re}from"./data-CE8KYutT.js";import{S as ne}from"./SelectInput-DQA3M2_k.js";import"./index-CT7DmVJL.js";import"./GoogleIcon-DuI2GHZB.js";import"./TextInput-BX6ZhQZD.js";import"./x-BvB8MqR2.js";import"./chunk-H46NUPBZ-BLNEgenz.js";import"./auth-nEt-wTWX.js";import"./zod-BITilnug.js";import"./chunk-EC6XFFZH-BrmM6N9q.js";import"./chunk-6SZ7MXCX-B675XKLd.js";import"./chunk-2EW3JUUD-BwT3uNs5.js";import"./chunk-YQO7BFFX-BUGNodZ-.js";import"./chunk-FHHZMTWR-DsqyOmQl.js";import"./shopping-bag-dy5fahnE.js";import"./chevron-right-CVggbifx.js";var P=new Map,I=new WeakMap,M=0,ie=void 0;function oe(e){return e?(I.has(e)||(M+=1,I.set(e,M.toString())),I.get(e)):"0"}function ae(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?oe(e.root):e[t]}`).toString()}function ce(e){const t=ae(e);let i=P.get(t);if(!i){const l=new Map;let p;const n=new IntersectionObserver(o=>{o.forEach(r=>{var a;const x=r.isIntersecting&&p.some(u=>r.intersectionRatio>=u);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=x),(a=l.get(r.target))==null||a.forEach(u=>{u(x,r)})})},e);p=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:n,elements:l},P.set(t,i)}return i}function le(e,t,i={},l=ie){if(typeof window.IntersectionObserver>"u"&&l!==void 0){const a=e.getBoundingClientRect();return t(l,{isIntersecting:l,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:p,observer:n,elements:o}=ce(i),r=o.get(e)||[];return o.has(e)||o.set(e,r),r.push(t),n.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(o.delete(e),n.unobserve(e)),o.size===0&&(n.disconnect(),P.delete(p))}}function ue({threshold:e,delay:t,trackVisibility:i,rootMargin:l,root:p,triggerOnce:n,skip:o,initialInView:r,fallbackInView:a,onChange:x}={}){var u;const[j,w]=d.useState(null),y=d.useRef(),[g,B]=d.useState({inView:!!r,entry:void 0});y.current=x,d.useEffect(()=>{if(o||!j)return;let m;return m=le(j,(R,b)=>{B({inView:R,entry:b}),y.current&&y.current(R,b),b.isIntersecting&&n&&m&&(m(),m=void 0)},{root:p,rootMargin:l,threshold:e,trackVisibility:i,delay:t},a),()=>{m&&m()}},[Array.isArray(e)?e.toString():e,j,p,l,n,o,i,a,t]);const v=(u=g.entry)==null?void 0:u.target,C=d.useRef();!j&&v&&!n&&!o&&C.current!==v&&(C.current=v,B({inView:!!r,entry:void 0}));const f=[w,g.inView,g.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}const Ee=()=>{const{ref:e,inView:t}=ue(),[i,l]=d.useState(""),p=N(),[n]=A("(max-width: 540px)"),o=V(),r=o.pathname.split("/")[1].replace(/-/g," "),a=new URLSearchParams(o.search),x=a.get("sort")||"",[u,j]=d.useState([]),[w,y]=d.useState([]),{data:g,fetchNextPage:B,isFetchingNextPage:v,hasNextPage:C,isPending:f}=K(i,JSON.stringify(u),JSON.stringify(w));d.useEffect(()=>{l(x)},[x]),d.useEffect(()=>{t&&C&&!v&&B()},[t,C,v]);const m=h=>{l(h.value),h.value!==""&&(a.set("sort",h.value),p(`?${a.toString()}`))},R=(h,S)=>{j(h.target.checked?[...u,S]:u.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})},b=(h,S)=>{y(h.target.checked?[...w,S]:w.filter(c=>c!==S)),window.scroll({top:0,behavior:"smooth"})},{isOpen:O,onOpen:T,onClose:D}=_();return s.jsxs(k,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw"},py:10,children:[s.jsxs(F,{gap:4,flexDir:n?"column":"row",justify:n?"center":"space-between",align:n?"start":"space-between",children:[s.jsxs(H,{gap:2,children:[s.jsx(U,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,textTransform:"capitalize",children:r}),s.jsx(ee,{})]}),s.jsx(ne,{isControlled:!1,value:i,placeholder:"Sort by",name:"sort",handleChange:m,options:se})]}),s.jsxs(te,{isOpen:O,onClose:D,children:[s.jsx(E,{}),s.jsx(L,{handleSizeSelect:R,handleColorSelect:b})]}),s.jsx(W,{"aria-label":"Filter",as:re,cursor:"pointer",size:"xs",p:1,colorScheme:"gray",display:{base:"block",sm:"none"},onClick:T}),s.jsxs(F,{py:4,gap:4,children:[s.jsx(F,{w:{sm:"200px",md:"250px"},display:{base:"none",sm:"flex"},minH:window.innerHeight,children:s.jsxs(F,{flexDir:"column",gap:4,w:"full",children:[s.jsx(E,{}),s.jsx(L,{handleSizeSelect:R,handleColorSelect:b})]})}),f?s.jsx($,{}):s.jsxs(F,{flexDir:"column",gap:4,w:"full",children:[g==null?void 0:g.pages.map((h,S)=>s.jsxs(z,{children:[s.jsx(J,{columnsCountBreakPoints:X,children:s.jsx(q,{gutter:n?"10px":"20px",children:h.data.map(c=>s.jsx(Y,{data:c,discountPercent:c==null?void 0:c.discount,colorOptions:(c==null?void 0:c.product_properties)&&c.product_properties},c.id))})}),")"]},S)),s.jsx(z,{ref:e,h:"1px"}),s.jsx(Q,{gap:4,py:10,align:"center",justify:"center",children:v&&s.jsx(G,{as:Z,boxSize:20})})]})]})]})};export{Ee as default};
