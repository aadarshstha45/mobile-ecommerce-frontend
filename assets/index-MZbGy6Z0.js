import{r as a,u as A,j as e,F as p,T as m,L,a as M,S as E,b as I,B as T,c as N,d as R,e as U,f as W,g as $,h as H,C as q,i as J,k as O,l as Q,M as V,m as G}from"./index-DQ2lrmGm.js";import{B as K}from"./index-4eshbGdl.js";import{S as X}from"./SelectInput-CUzynA1T.js";import{c as Y,I as Z}from"./index-D39xByJG.js";import{P as ee}from"./PaginationButton-B_gHwS93.js";import{A as se,a as te,b as ne,M as oe,c as re,d as ae}from"./chunk-TRO7245M-DUKBuIuZ.js";import{s as ie}from"./data-BjPZZWce.js";import"./chevron-right-C3FDJPkL.js";import"./chunk-H46NUPBZ-BGFkfMlP.js";import"./index-CdO52GfW.js";import"./GoogleIcon-DBjPAB6O.js";import"./TextInput-ChqmmbFd.js";import"./x-BEYZqOP6.js";import"./auth-CF__1Ihl.js";import"./zod-BEGqWhRk.js";import"./chunk-EC6XFFZH-DFfv7t_k.js";import"./index-iVE4t_pu.js";import"./chunk-2EW3JUUD-DYLPTi_b.js";import"./chunk-YQO7BFFX-C-Y5cD9s.js";import"./chunk-FHHZMTWR-CwOkj_tn.js";import"./shopping-bag-BDRfeRjd.js";const le=()=>{var x;const[o,r]=a.useState(10),{data:n,isFetching:i}=A(o);return(n==null?void 0:n.data.length)>0&&e.jsxs(p,{flexDir:"column",gap:2,border:"0.5px solid",h:"fit-content",p:4,borderRadius:"10px",children:[e.jsx(m,{textDecor:"underline",fontWeight:500,fontSize:"18px",children:"Categories"}),n.data.map(l=>e.jsx(L,{fontSize:"16px",as:M,to:`/${l.slug}`,children:l.name},l.id)),((x=n==null?void 0:n.pagination)==null?void 0:x.total_pages)>1&&(i?e.jsx(E,{size:"xs",color:"primary.500"}):e.jsx(I,{w:"fit-content",size:"xs",variant:"unstyled",onClick:()=>r(o+5),_hover:{textDecoration:"underline"},textColor:"primary.500",children:"View More"}))]})};function ce({title:o,children:r}){return e.jsx(se,{allowToggle:!0,children:e.jsx(te,{children:({isExpanded:n})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:e.jsxs(ne,{children:[e.jsx(T,{as:"span",flex:"1",textAlign:"left",children:o}),n?e.jsx(oe,{fontSize:"12px"}):e.jsx(re,{fontSize:"12px"})]})}),e.jsx(ae,{display:"flex",flexDir:"column",pb:4,children:r})]})})})}function _e(){var C,y,P;const{category_slug:o,slug:r}=N(),n=R(),[i]=U("(max-width: 540px)"),x=W(),l=x.pathname.split("/")[1].replace(/-/g," ");console.log(l);const d=new URLSearchParams(x.search),u=Number(d.get("page"))||1,f=d.get("sort")||"",[w,j]=a.useState(1),[g,S]=a.useState("");if(!r)throw new Error("Slug is required");const b=o?{category_slug:o,slug:r}:r,[c,v]=a.useState([]),{data:h}=$(),{data:t,isPending:z,isFetching:F}=H(u,b,g,JSON.stringify(c));console.log(t),a.useEffect(()=>{j(u)},[u]),a.useEffect(()=>{S(f)},[f]);const B=s=>{S(s.value),s.value!==""&&(d.set("page","1"),d.set("sort",s.value),n(`?${d.toString()}`))},k=s=>{v(s)};return a.useEffect(()=>{c.length>0&&console.log(c)},[c]),e.jsxs(q,{as:"section",id:"collection",maxW:{base:"98vw",md:"95vw"},py:10,children:[e.jsxs(p,{gap:4,flexDir:i?"column":"row",justify:i?"center":"space-between",align:i?"start":"space-between",children:[e.jsxs(J,{gap:2,children:[e.jsx(m,{fontSize:{base:"18px",sm:"20px",md:"22px",lg:"24px"},fontWeight:500,textTransform:"capitalize",children:l}),e.jsx(K,{})]}),e.jsx(X,{isControlled:!1,value:g,placeholder:"Sort by",name:"sort",handleChange:B,options:ie})]}),e.jsxs(p,{py:10,children:[e.jsx(p,{w:"250px",display:{base:"none",sm:"flex"},minH:window.innerHeight,children:e.jsxs(p,{flexDir:"column",gap:4,children:[e.jsx(le,{}),h&&h.length>0&&e.jsx(ce,{title:"Sizes",children:h.map(s=>e.jsx(O,{onChange:D=>k(D.target.checked?[...c,s.id]:c.filter(_=>_!==s.id)),value:s.id,children:s.name},s.id))})]})}),e.jsxs(p,{w:"full",flexDir:"column",gap:4,children:[z||F?e.jsx(Q,{height:"500px"}):t&&((C=t.data)==null?void 0:C.length)>0?e.jsx(V,{columnsCountBreakPoints:Y,children:e.jsx(G,{gutter:i?"10px":"20px",children:t==null?void 0:t.data.map(s=>e.jsx(Z,{data:s,discountPercent:s==null?void 0:s.discount,colorOptions:(s==null?void 0:s.product_properties)&&s.product_properties},s.id))})}):e.jsx(m,{fontSize:"xl",children:"No products found"}),(t==null?void 0:t.pagination.total_items)>12&&e.jsx(ee,{currentPage:((y=t==null?void 0:t.pagination)==null?void 0:y.current_page)??w,setCurrentPage:j,totalPages:((P=t==null?void 0:t.pagination)==null?void 0:P.total_pages)??2,sort:g})]})]})]})}export{_e as default};
